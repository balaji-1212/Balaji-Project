var etThemeBuilder,options_old={},etPreImport={};!function(d){"use strict";etThemeBuilder={init:function(){this.etGlobal.et_init(),this.etPresets.et_set_presets(),this.etPresets.et_init(),this.etMultipleTemplates.et_init()},etGlobal:{et_init:function(){this.et_show_builder(),this.et_collapse_builder(),this.et_edit(),this.et_add_options_devices(),this.et_change_device(),this.et_switch_default_header(),this.et_switch_default_single_product(),this.et_reset_header_builder_settings()},et_show_builder:function(){wp.customize.panel("header-builder")&&(wp.customize.panel("header-builder").expanded.bind(function(e){d(".et_customizer-builder-header").hasClass("loaded")?etThemeBuilder.etHeader.et_close():d(".et_customizer-builder-header").length?(etThemeBuilder.etHeader.et_show(),etThemeBuilder.etHeader.et_force_resize(),etThemeBuilder.etHeader.et_resizable()):etThemeBuilder.etGlobal.et_load_builder("header")}),d(document).on("click",".customize-panel-back",function(e){etThemeBuilder.etHeader.et_close()})),wp.customize.panel("single_product_builder")&&(wp.customize.panel("single_product_builder").expanded.bind(function(e){d(".et_customizer-builder-single_product").hasClass("loaded")?etThemeBuilder.etSections.et_close(d(".et_customizer-builder-single_product")):d(".et_customizer-builder-single_product").length?etThemeBuilder.etSections.et_show(d(".et_customizer-builder-single_product")):etThemeBuilder.etGlobal.et_load_builder("product-single")}),d(document).on("click",".customize-panel-back",function(e){etThemeBuilder.etSections.et_close(d(".et_customizer-builder-single_product"))}))},et_load_builder:function(t){d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_template",template:t,et_multiple:BuilderSetting.et_multiple},dataType:"html",success:function(e){d(".wp-full-overlay").append(e),"header"==t?(etThemeBuilder.etHeader.et_show(),etThemeBuilder.etHeader.et_init()):"product-single"==t?(etThemeBuilder.etSections.et_show(d(".et_customizer-builder-single_product")),etThemeBuilder.etSections.et_init(".et_customizer-builder-single_product",{sticky:!0})):"product-archive"==t&&(etThemeBuilder.etSections.et_show(d(".et_customizer-builder-archive_product")),etThemeBuilder.etSections.et_init(".et_customizer-builder-archive_product",{sticky:!0}))},error:function(e){etThemeBuilder.etGlobal.et_notice("load-builder","error")},complete:function(){}})},et_add_options_devices:function(){wp.customize.section.each(function(i){"kirki-lazy"!==i.params.type&&i.expanded.bind(function(){var t,e="#accordion-section-"+i.id;d(e).is(".et_device-added")||(d(e).addClass("et_device-added"),t=d("#customize-footer-actions .devices-wrapper").html(),e="#"+d(e).attr("aria-owns"),d.each(d(e).find("li[id*=_et-mobile], li[id*=_et-tablet], li[id*=_et-desktop]"),function(){var e=d(this).attr("id");e=(e=(e=e.replace("_et-mobile","")).replace("_et-tablet","")).replace("_et-desktop",""),1<d("li[id*="+e+"_et]").length&&d(this).addClass("multi-device").prepend(t)})),"mobile_panel"==i.id&&d(".devices-wrapper .preview-mobile").trigger("click")})})},et_add_options_devices_test:function(){wp.customize.section.each(function(i){i.expanded.bind(function(){var t,e="#accordion-section-"+i.id;d(e).is(".et_device-added")||(d(e).addClass("et_device-added"),t=d("#customize-footer-actions .devices-wrapper").html(),e="#"+d(e).attr("aria-owns"),d.each(d(e).find("li[id*=_et-mobile], li[id*=_et-tablet], li[id*=_et-desktop]"),function(){var e=d(this).attr("id");e=(e=(e=e.replace("_et-mobile","")).replace("_et-tablet","")).replace("_et-desktop",""),1<d("li[id*="+e+"_et]").length&&d(this).addClass("multi-device").prepend(t)})),"mobile_panel"==i.id&&d(".devices-wrapper .preview-mobile").trigger("click")})})},et_change_device:function(){d(document).on("click",".devices-wrapper button",function(){d(this).hasClass("preview-desktop")?(d(".et_customizer-builder-header .et_desktop-mod").removeClass("hidden"),d(".et_customizer-builder-header .et_mobile-mod").addClass("hidden")):(d(".et_customizer-builder-header .et_desktop-mod").addClass("hidden"),d(".et_customizer-builder-header .et_mobile-mod").removeClass("hidden")),d(".et_headers-multiple").addClass("hidden"),etThemeBuilder.etHeader.et_force_resize(),wp.customize.previewer.refresh()}),d(document).on("click",".et_button.desktop, .et_button.mobile",function(e){var t=d(this).data("device");d(".devices-wrapper .preview-"+t).trigger("click"),d(".et_button.desktop, .et_button.mobile").removeClass("inactive"),d(this).hasClass("desktop")?(d(".et_customizer-builder-header .et_desktop-mod").removeClass("hidden"),d(".et_customizer-builder-header .et_mobile-mod").addClass("hidden")):(d(".et_customizer-builder-header .et_desktop-mod").addClass("hidden"),d(".et_customizer-builder-header .et_mobile-mod").removeClass("hidden")),d(".et_headers-multiple").addClass("hidden"),d(".et_call-multiple-headers").removeClass("active"),etThemeBuilder.etHeader.et_force_resize(),wp.customize.previewer.refresh()}),d(document).on("click",".customize-control .devices button",function(e){var t=d(this).data("device");d(".devices-wrapper .preview-"+t).trigger("click"),wp.customize.previewer.refresh()})},et_generate_random:function(e){var t="",i="23456789ABCDEFHJKLMNPRTVWXYZabcdefghijklmnopqrstuvwxyz";e=e||5;for(var a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},et_collapse_builder:function(){d(document).on("click",".et_collapse-builder",function(e){e.preventDefault();e=d(this).attr("data-panel");d(".et_customizer-builder-"+e).hasClass("collapsed")?d(".et_customizer-builder-"+e).removeClass("collapsed"):d(".et_customizer-builder-"+e).addClass("collapsed")})},et_edit:function(){d(document).on("click",".et_edit",function(e){e.preventDefault(),"connect_block_package"==d(this).attr("data-section")?etThemeBuilder.etConnectBlock.et_popup(d(this)):0<=d(this).attr("data-section").toLowerCase().indexOf("sidebar-widgets")?wp.customize.panel("widgets").focus():(e=d(this).attr("data-parent"),wp.customize.section(e).focus(),d(this).is("[data-option]")&&(e=d(this).attr("data-option"),d("#customize-controls .wp-full-overlay-sidebar-content").animate({scrollTop:d(e).offset().top},1e3)))})},et_range_fields:function(e){var e=jQuery(e),t=jQuery(e).find('input[type="range"]'),i=jQuery(e).find('input[type="text"]');jQuery(e).data("default");t.on("mousemove change",function(){i.attr("value",t.val())}),i.on("input paste change",function(){t.attr("value",i.val())})},et_switch_default_header:function(){d(document).on("click","#etheme-disable-default-header",function(){var e=d(this).is(":checked");d(this).attr("checked",e),d(this).checked=e,setTimeout(function(e,t){if(!confirm("Are you sure ?"))return d(e).attr("checked",!t),void(d(e).checked=!t);d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_switch_default",type:"header_builder",value:t},success:function(e){location.reload()},error:function(e){etThemeBuilder.etGlobal.et_notice("switch-header","error")}})},350,d(this),e)})},et_switch_default_single_product:function(){d(document).on("click","#etheme-disable-default-single-product",function(){var e=d(this).is(":checked");d(this).attr("checked",e),d(this).checked=e,setTimeout(function(e,t){if(!confirm("Are you sure ?"))return d(e).attr("checked",!t),void(d(e).checked=!t);d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_switch_default",type:"single_product_builder",value:t},success:function(e){location.reload()},error:function(e){etThemeBuilder.etGlobal.et_notice("switch-single-product","error")}})},350,d(this),e)})},et_reset_header_builder_settings:function(){d(document).on("click","#etheme-reset-header-builder",function(){confirm("Are you sure ? This will remove all your prebuild elements.")&&d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_presets",preset:"clear"},dataType:"json",success:function(e){var t=d(".et_customizer-builder").attr("class"),i=encodeURI(e.connect_block_package);wp.customize.control("header_top_elements").setting.set(e.header_top_elements),wp.customize.control("header_main_elements").setting.set(e.header_main_elements),wp.customize.control("header_bottom_elements").setting.set(e.header_bottom_elements),wp.customize.control("connect_block_package").setting.set(i),i=encodeURI(e.connect_block_mobile_package),wp.customize.control("header_mobile_top_elements").setting.set(e.header_mobile_top_elements),wp.customize.control("header_mobile_main_elements").setting.set(e.header_mobile_main_elements),wp.customize.control("header_mobile_bottom_elements").setting.set(e.header_mobile_bottom_elements),wp.customize.control("connect_block_mobile_package").setting.set(i),d(".et_customizer-builder").html(e.template),d(".et_customizer-builder").attr("class",t),etThemeBuilder.etHeader.et_sortable(),etThemeBuilder.etHeader.et_resizable(),d(".et_customizer-builder").prepend('<div class="et-message et-warning" style="margin:0 -15px;">Please, save your changes and reload your page after you have chosen your template.</div>'),setTimeout(function(){d(".et_customizer-builder").find("> .et-message").fadeOut()},2e4)},error:function(e){etThemeBuilder.etGlobal.et_notice("reset-header-builder","error")},complete:function(){}})})},et_get_notice:function(e){var t=d("#etheme_ajax-notices").html();return JSON.parse(t)[e]},et_notice:function(e,t,i){i=i||"";var a=etThemeBuilder.etGlobal.et_get_notice(e);switch(t){case"error":console.error(a+i);break;case"warning":console.warn(a+i);break;case"log":console.log(a+i);break;case"alert":alert(a+i);break;default:console.log(a+i)}},et_panel_resize:function(e){var i,a,o,n=d(e).get(0),e=d(e+" .et_panel-resizer").get(0);function t(e){d("#customize-preview").addClass("et_no-events");var t=i-(e.pageY-o);250<t&&(n.style.height=t+"px",n.style.top=a+(e.pageY-o)+"px")}function r(){d("#customize-preview").removeClass("et_no-events"),window.removeEventListener("mousemove",t)}e.addEventListener("mousedown",function(e){e.preventDefault(),i=parseFloat(getComputedStyle(n,null).getPropertyValue("height").replace("px","")),a=n.getBoundingClientRect().top,o=e.pageY,window.addEventListener("mousemove",t),window.addEventListener("mouseup",r)})},et_customizer_popup:function(e){d(".et_customizer-popup").remove();let t=d("body"),i=(t.addClass("et_customizer-popup-on"),t.append('<div class="et_customizer-popup hidden"><div class="et_customizer-popup-content"></div><span class="et_close-popup"><span class="dashicons dashicons-no-alt"></span></span></div>'),d(".et_customizer-popup"));i.find(".et_close-popup").on("click",function(e){i.addClass("hidden"),i.remove(),t.removeClass("et_customizer-popup-on")}),i.find(".et_customizer-popup-content").html(e),i.removeClass("hidden")}},etMultipleTemplates:{et_init:function(){this.et_show(),this.et_multiples_actions(),this.et_conditions_actions(),this.et_save_multiple_in_bar(),this.new_multiple_header()},new_multiple_header:function(){BuilderSetting.et_multiple&&(etThemeBuilder.etMultipleTemplates.et_publish_btn("disable","header"),d(document).on("click",".et_save-multiple-in-bar",function(e){var t,i=d(".et_customizer-builder.loaded");i.length&&(t="header",i.hasClass("et_customizer-builder-header")?t="header":i.hasClass("et_customizer-builder-single_product")&&(t="single-product"),d("body").addClass("et_customizer-popup-on et_with-bubble"),i=etThemeBuilder.etMultipleTemplates.et_get_options(!0,"save"),e.preventDefault(),d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_multiple",type:"save",header:BuilderSetting.et_multiple,options:i,builder:t,title:""},dataType:"json",success:function(e){d(window).off("beforeunload"),window.close()},error:function(e){etThemeBuilder.etGlobal.et_notice("multiple-action-error","error",action)},complete:function(){}}))}))},et_save_multiple_in_bar:function(){d(document).on("click",".et_save-multiple-in-bar",function(e){d(".et_customizer-builder.loaded").length&&(e.preventDefault(),d(".et_header-save:not(.hidden)").trigger("click"))})},et_show:function(){d(document).on("click",".et_open-multiple",function(e){e.preventDefault(),d(".et_call-multiple-headers").trigger("click")}),d(document).on("click",[".et_call-multiple-headers",".et_call-multiple-single-products"].join(","),function(e){e.preventDefault();var t,i,a,o,n=d(this),e="";n.addClass("et_no-events"),n.hasClass("et_call-multiple-headers")?(t=".et_headers-multiple",i=".et_headers-multiple-headers .et_headers-multiple-content",a=d(".et_customizer-builder-header"),e="header",o=d("#sub-accordion-panel-header-builder li").not(".cannot-expand")):n.hasClass("et_call-multiple-single-products")&&(t=".et_product-single-multiple",i=".et_product-single-multiple-products .et_product-single-multiple-content",a=d(".et_customizer-builder-single_product"),e="single-product",o=d("#sub-accordion-panel-single_product_builder li").not(".customize-info")),t&&i&&a&&e||etThemeBuilder.etGlobal.et_notice("wrong-multiple-section","error"),d(".et_button.mobile, .et_button.desktop").addClass("inactive"),n.addClass("active"),d(t).length?(n.removeClass("et_no-events"),d(t).removeClass("hidden")):etThemeBuilder.etMultipleTemplates.et_load_multiple(e,t,a,i,function(){n.removeClass("et_no-events")}),a.find(".et_button.show-builder").removeClass("hidden"),a.find(".et_button.show-builder").on("click",function(e){d(a).find(".et_button.show-builder").addClass("hidden"),d(t).addClass("hidden")}),n.hasClass("et-ajax-option")||(d.each(o,function(e,t){var i=(i=d(t).attr("id")).replace("accordion-section-","");d(t).hasClass("control-section-kirki-lazy")&&!d("#"+(t="sub-accordion-section-"+i)).hasClass("et-customizer-section-loaded")&&d("#"+t).addClass("et-customizer-section-loaded").trigger("et-customizer-section-opened")}),n.addClass("et-ajax-option"))})},et_load_multiple:function(t,i,a,o,e){d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_template",template:"multiple-section",builder:t,et_multiple:BuilderSetting.et_multiple},dataType:"html",success:function(e){d(i).remove(),a.find(".et_header-head").after(e),d(i).removeClass("hidden"),d(o).find("ul li").length||etThemeBuilder.etMultipleTemplates.et_create_default_template(t,o),d(".et_header-action.et_header-outdoor-action.disabled").removeClass("disabled")},error:function(e){etThemeBuilder.etGlobal.et_notice("load-multiple","error")},complete:function(){d(i).removeClass("hidden"),e()}})},et_create_default_template:function(e,t){var i=etThemeBuilder.etMultipleTemplates.et_get_options(!0,"save");d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_multiple",type:"add",header:"Default",options:i,builder:e},dataType:"json",success:function(e){d(t).html(e.headers)},error:function(e){etThemeBuilder.etGlobal.et_notice("default-multiple-template","error")},complete:function(){}})},et_get_ajax_options:function(){var e=d(".et_customizer-builder.loaded").find(".et_options-data").html(),e=JSON.parse(e);d(".wp-customizer").addClass("et-preload"),d.ajax({url:ajaxurl,method:"POST",async:!1,data:{action:"et_ajax_multiple",type:"get_option",builder:"",options_list:e},dataType:"json",success:function(e){etThemeBuilder.etMultipleTemplates.et_create_ajax_options(e)},error:function(){}})},et_create_ajax_options:function(e){d.when(_.each(e.controls,function(e,t){1!=wp.customize.section(t).loaded&&(wp.customize.section(t).addControl(e),etThemeBuilder.etGlobal.et_add_options_devices_test())})),d(".wp-customizer").removeClass("et-preload")},et_get_options:function(i,a){var o={},e=d(".et_customizer-builder.loaded"),t=e.find(".et_options-data").html(),t=JSON.parse(t),n=(e.hasClass("et_customizer-builder-header")?i?(o.header_top_elements=btoa(wp.customize.control("header_top_elements").setting.get()),o.header_main_elements=btoa(wp.customize.control("header_main_elements").setting.get()),o.header_bottom_elements=btoa(wp.customize.control("header_bottom_elements").setting.get()),o.connect_block_package=btoa(decodeURI(wp.customize.control("connect_block_package").setting.get())),o.header_mobile_top_elements=btoa(wp.customize.control("header_mobile_top_elements").setting.get()),o.header_mobile_main_elements=btoa(wp.customize.control("header_mobile_main_elements").setting.get()),o.header_mobile_bottom_elements=btoa(wp.customize.control("header_mobile_bottom_elements").setting.get()),o.connect_block_mobile_package=btoa(decodeURI(wp.customize.control("connect_block_mobile_package").setting.get()))):(o.header_top_elements=wp.customize.control("header_top_elements").setting.get(),o.header_main_elements=wp.customize.control("header_main_elements").setting.get(),o.header_bottom_elements=wp.customize.control("header_bottom_elements").setting.get(),o.connect_block_package=decodeURI(wp.customize.control("connect_block_package").setting.get()),o.header_mobile_top_elements=wp.customize.control("header_mobile_top_elements").setting.get(),o.header_mobile_main_elements=wp.customize.control("header_mobile_main_elements").setting.get(),o.header_mobile_bottom_elements=wp.customize.control("header_mobile_bottom_elements").setting.get(),o.connect_block_mobile_package=decodeURI(wp.customize.control("connect_block_mobile_package").setting.get())):e.hasClass("et_customizer-builder-single_product")&&(i?(o.product_single_elements=btoa(wp.customize.control("product_single_elements").setting.get()),o.connect_block_product_single_package=btoa(decodeURI(wp.customize.control("connect_block_product_single_package").setting.get()))):(o.product_single_elements=wp.customize.control("product_single_elements").setting.get(),o.connect_block_product_single_package=decodeURI(wp.customize.control("connect_block_product_single_package").setting.get()))),["html_block5","html_block4","html_block3","html_block2","html_block1"]);return d.each(t,function(e,t){wp.customize.control(t)&&("save"==a&&-1<n.indexOf(t)&&i?o[t]=btoa(etThemeBuilder.etMultipleTemplates.utf8_encode(wp.customize.control(t).setting.get())):o[t]=wp.customize.control(t).setting.get())}),""==o.header_vertical_section1_content&&(o.header_vertical_section1_content="empty"),""==o.header_vertical_section2_content&&(o.header_vertical_section2_content="empty"),""==o.header_vertical_section3_content&&(o.header_vertical_section3_content="empty"),o},utf8_encode:function(e){if(null==e)return"";for(var t,i=e+"",a="",o=t=0,n=i.length,r=0;r<n;r++){var s=i.charCodeAt(r),l=null;if(s<128)t++;else if(127<s&&s<2048)l=String.fromCharCode(s>>6|192,63&s|128);else if(55296!=(63488&s))l=String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128);else{if(55296!=(64512&s))throw new RangeError("Unmatched trail surrogate at "+r);var d=i.charCodeAt(++r);if(56320!=(64512&d))throw new RangeError("Unmatched lead surrogate at "+(r-1));s=((1023&s)<<10)+(1023&d)+65536,l=String.fromCharCode(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}null!==l&&(o<t&&(a+=i.slice(o,t)),a+=l,o=t=r+1)}return o<t&&(a+=i.slice(o,n)),a},et_render_options:function(e){d.each(e,function(i,a){if(wp.customize.control(i)){"connect_block_package"!=i&&"connect_block_mobile_package"!=i&&"connect_block_product_single_package"!=i||wp.customize.control(i).setting.set(a);var e,t=wp.customize.settings.controls[i];switch(void 0===t&&((t=wp.customize.control(i)).type=t.params.type),t.type){case"kirki-box-model":d.each(a,function(e,t){wp.customize.control(i).container.find('[data-target-option="'+e+'"]').attr("value",t).trigger("change")});break;case"repeater":wp.customize.control(i).setting.set(a);break;case"kirki-sortable":d.each(wp.customize.control(i).container.find(".kirki-sortable-item"),function(e,t){-1<a.indexOf(t)||wp.customize.control(i).container.find('[data-value="'+d(this).data("value")+'"]').addClass("invisible").find("i.visibility").addClass("dashicons-visibility-faint").trigger("change")}),""!=a&&d.each(a,function(e,t){wp.customize.control(i).container.find('[data-value="'+t+'"]').removeClass("invisible").find("i.visibility").removeClass("dashicons-visibility-faint").trigger("change")}),wp.customize.control(i).setting.set(a);break;case"kirki-toggle":a=1===a||"1"===a||"true"===a||!0===a,wp.customize.control(i).setting.set(a);break;case"kirki-radio-image":wp.customize.control(i).setting.set(a),wp.customize.control(i).container.find('input[value="'+a+'"]').prop("checked",!0).trigger("change");break;case"kirki-typography":a["font-family"]&&(a["font-family"]=a["font-family"].replace("\\",""),a["font-family"]=a["font-family"].replace("\\","")),wp.customize.control(i).setting.set(a);var o=wp.customize.control(i).section();wp.customize.section(o).container.hasClass("et_binded")||wp.customize.section(o).expanded.bind(function(){var e=wp.customize.control(i).setting.get();wp.customize.control(i).container.find(".font-family select").val(e["font-family"]).trigger("change"),wp.customize.control(i).container.find(".variant select").val(e.variant).trigger("change"),wp.customize.control(i).container.find(".text-transform select").val(e["text-transform"]).trigger("change"),wp.customize.control(i).container.find(".font-size input").attr("value",e["font-size"]).trigger("change"),wp.customize.control(i).container.find(".letter-spacing input").attr("value",e["letter-spacing"]).trigger("change"),wp.customize.control(i).container.find(".line-height input").attr("value",e["line-height"]).trigger("change"),wp.customize.section(o).container.addClass("et_binded")}),wp.customize.control(i).container.find(".font-family select").val(a["font-family"]).trigger("change"),wp.customize.control(i).container.find(".variant select").val(a.variant).trigger("change"),wp.customize.control(i).container.find(".text-transform select").val(a["text-transform"]).trigger("change"),wp.customize.control(i).container.find(".font-size input").attr("value",a["font-size"]).trigger("change"),wp.customize.control(i).container.find(".letter-spacing input").attr("value",a["letter-spacing"]).trigger("change"),wp.customize.control(i).container.find(".line-height input").attr("value",a["line-height"]).trigger("change");break;case"kirki-background":wp.customize.control(i).setting.set(a),wp.customize.control(i).container.find(".kirki-color-control").wpColorPicker("color",a["background-color"]),wp.customize.control(i).container.find(".background-repeat select").val(a["background-repeat"]).trigger("change"),wp.customize.control(i).container.find(".background-position select").val(a["background-position"]).trigger("change"),wp.customize.control(i).container.find('.background-size input[value="'+a["background-size"]+'"]').prop("checked",!0).trigger("change"),wp.customize.control(i).container.find('.background-attachment input[value="'+a["background-attachment"]+'"]').prop("checked",!0).trigger("change"),a["background-image"]?(wp.customize.control(i).container.find(".thumbnail-image").length?wp.customize.control(i).container.find(".thumbnail-image img").attr("src",a["background-image"]):(e='<div class="thumbnail thumbnail-image"><img src="'+a["background-image"]+'" alt=""></div>',wp.customize.control(i).container.find(".attachment-media-view").prepend(e),wp.customize.control(i).container.find(".placeholder").remove()),wp.customize.control(i).container.find(".background-image-upload-remove-button").removeClass("hidden").css("display","inline-block"),wp.customize.control(i).container.find(".background-repeat").css("display","block"),wp.customize.control(i).container.find(".background-position").css("display","block"),wp.customize.control(i).container.find(".background-size").css("display","block"),wp.customize.control(i).container.find(".background-attachment").css("display","block")):(wp.customize.control(i).container.find(".thumbnail-image, .placeholder").remove(),wp.customize.control(i).container.find(".attachment-media-view").prepend('<div class="placeholder">No file selected</div>'),wp.customize.control(i).container.find(".background-image-upload-remove-button").addClass("hidden").css("display","none"),wp.customize.control(i).container.find(".background-repeat").css("display","none"),wp.customize.control(i).container.find(".background-position").css("display","none"),wp.customize.control(i).container.find(".background-size").css("display","none"),wp.customize.control(i).container.find(".background-attachment").css("display","none"));break;case"kirki-wcag-tc":wp.customize.control(i).container.find(".tabs button").removeClass("active"),wp.customize.control(i).container.find('.tabs button[data-mode="custom"]').addClass("active"),wp.customize.control(i).container.find(".kirki-a11y-text-colorpicker-wrapper").hide(),wp.customize.control(i).container.find('.kirki-a11y-text-colorpicker-wrapper[data-id="custom"]').show(),wp.customize.control(i).container.find(".kirki-color-control").wpColorPicker("color",a),wp.customize.control(i).setting.set(a);break;case"kirki-color":wp.customize.control(i).setting.set(a),wp.customize.control(i).container.find(".kirki-color-control").wpColorPicker("color",a);break;case"kirki-generic":wp.customize.control(i).setting.set(a),wp.customize.control(i).container.find("input").attr("value",a);break;default:-1<["menu_item_dots_separator_et-desktop","menu_2_item_dots_separator_et-desktop","contacts_separator_type_et-desktop"].indexOf(i)&&(a="\\"+(a=a.replace(/\\/g,""))),wp.customize.control(i).setting.set(a),"single_product_html_block1_section"!=i&&"single_product_html_block2_section"!=i&&"single_product_html_block3_section"!=i||wp.customize.control(i).container.find('[data-id="single_product_html_block1_section"]').val(a).trigger("change"),wp.customize.control(i).setting.set(a)}}}),setTimeout(function(){d(".wp-customizer").removeClass("et-preload")},300)},et_publish_btn:function(e,t){var i="",a=("single-product"==t?i=d(".customize-pane-parent .accordion-section:not(#accordion-panel-woocommerce) h3"):"header"==t&&(i=d(".customize-pane-parent .accordion-section:not(#accordion-panel-header-builder) h3")),d("#customize-save-button-wrapper input")),o=d("#publish-settings"),n=etThemeBuilder.etGlobal.et_get_notice("save-text"),n='<input type="submit" name="et_save-multiple-in-bar" class="button button-primary save has-next-sibling et_save-multiple-in-bar" value="'+(n="header"==t?etThemeBuilder.etGlobal.et_get_notice("save-close-text"):n)+'">';"disable"==e?(d("#customize-save-button-wrapper").addClass("et_save-multiple loading "+t),o.addClass("hidden"),a.addClass("hidden"),a.addClass("disabled"),a.css({"pointer-events":"none"}),a.after(n),i.css({color:"rgba(34, 34, 34, 0.22)","pointer-events":"none","background-color":"transparent",display:"none"}),i.parent().css({cursor:"not-allowed",display:"none"})):(d("#customize-save-button-wrapper").removeClass("et_save-multiple loading "+t),d(".et_save-multiple-in-bar").remove(),o.removeClass("hidden"),a.removeClass("hidden"),a.removeClass("disabled"),a.css({"pointer-events":"all"}),i.css({color:"#222","pointer-events":"all","background-color":"transparent"}),i.parent().css({cursor:"pointer"}))},et_multiples_actions:function(){d(document).on("click",".et_call-new-header",function(e){d(".et_new-multiple-holder").hasClass("hidden")?d(".et_new-multiple-holder").removeClass("hidden"):d(".et_new-multiple-holder").addClass("hidden")}),d(document).on("click",".et_header-action",function(e){if(e.preventDefault(),!d(this).hasClass("disabled")){var i,t,e=d(this),a=e.attr("data-action"),o={},e=e.parents("li"),n=d(".et_customizer-builder.loaded"),r="header",s=".et_headers-multiple-content",l=".et_headers-multiple-conditions .et_conditions";if(n.hasClass("et_customizer-builder-header")?(s=".et_headers-multiple-headers .et_headers-multiple-content",l=".et_headers-multiple-conditions .et_conditions",r="header"):n.hasClass("et_customizer-builder-single_product")&&(s=".et_product-single-multiple-products .et_product-single-multiple-content",l=".et_product-single-multiple .et_conditions",r="single-product"),"edit-multiple"==a)window.open(d(this).attr("data-url"),"_blank").focus();else if("open-conditions"==a)d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_template",template:"multiple-condition",builder:r,et_multiple:d(this).attr("data-template")},dataType:"html",success:function(e){etThemeBuilder.etGlobal.et_customizer_popup(e),etThemeBuilder.etMultipleTemplates.et_conditions()},error:function(e){},complete:function(){}});else if("new-template"==a)d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_template",template:"multiple-popup-create",builder:r,et_multiple:d(this).attr("data-template")},dataType:"html",success:function(e){etThemeBuilder.etGlobal.et_customizer_popup(e),etThemeBuilder.etMultipleTemplates.et_conditions()},error:function(e){},complete:function(){}});else{if("popup-add"==a||"popup-add-open"==a)return i=d(this).attr("data-url"),(t=d(".et_add-new-multiple").val())?(d(".et_customizer-popup").addClass("loading"),o={},void d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_multiple",type:"add",header:t,options:o,builder:r,title:""},dataType:"json",success:function(t){if(t.id&&(etThemeBuilder.etMultipleTemplates.et_conditions_save_all(t.id),"popup-add-open"==a)){i+="header"!=r?"?autofocus[panel]=single_product_builder&et_multiple="+t.id:"?autofocus[panel]=header-builder&et_multiple="+t.id;let e=window.open(i,"_tab");null===e||void 0===e||null===typeof e?window.location.href=i:e.focus()}},error:function(e){etThemeBuilder.etGlobal.et_notice("multiple-action-error","error",a)},complete:function(){d(".et_close-popup").trigger("click")}})):void etThemeBuilder.etGlobal.et_notice("name-your-template","alert");if("copy"==a)return d(".et_builder-multiples").addClass("et_new-loading"),void d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_multiple",type:"copy",header:e.attr("data-header"),builder:r},dataType:"json",success:function(e){d(s).html(e.headers)},error:function(e){etThemeBuilder.etGlobal.et_notice("multiple-action-error","error",a)},complete:function(){d(".et_builder-multiples").removeClass("et_new-loading")}});if("copy_default"==a)return d(".et_builder-multiples").addClass("et_new-loading"),void d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_multiple",type:"copy_default",header:e.attr("data-header"),builder:r},dataType:"json",success:function(e){d(s).html(e.headers)},error:function(e){etThemeBuilder.etGlobal.et_notice("multiple-action-error","error",a)},complete:function(){d(".et_builder-multiples").removeClass("et_new-loading")}});if(t=e.attr("data-header"),"remove"==a){if(!confirm("Are you sure? You will not be able to revert it back"))return;d("body").addClass("et_customizer-popup-on et_with-bubble"),d(".et_headers-multiple-headers").addClass("et_new-loading"),d(".et_conditions").html(""),d(".et_condition-action.et_condition-add").addClass("hidden"),d(".et_conditions-notice.header-notice").removeClass("hidden"),n.removeClass("et_editing-global"),d(".multiple-header-name").attr("data-name",null)}else"copy_default"==a?(o=etThemeBuilder.etMultipleTemplates.et_get_options(!0,"save"),n.addClass("et_editing-global")):"copy"==a&&n.addClass("et_editing-global");"save-name"==a&&e.addClass("et_li-processing"),"edit-name"==a?(e.find(".et_title-editor").removeClass("hidden"),e.find(".et_header-title b").addClass("hidden"),e.find(".et_header-edit-name").addClass("hidden"),e.find(".et_header-save-name").removeClass("hidden")):(etThemeBuilder.etMultipleTemplates.et_multiples_ajax_action(a,t,o,n,r,s,l),d(".et_headers-multiple-headers").removeClass("et_new-loading"))}}})},et_multiples_ajax_action:function(t,e,i,a,o,n,r){var s="",l="";"save-name"==t&&(l=d('[data-header="'+e+'"]'),s=l.find(".et_title-editor").val()),d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_multiple",type:t,header:e,options:i,builder:o,title:s},dataType:"json",success:function(e){"remove"==t&&(d(n).html(e.headers),e=d(".et_customizer-builder.loaded .et_builder-multiples .et_builder-multiple-content ul li").length,d(".et_customizer-builder.loaded .multiple-count").html(e))},error:function(e){etThemeBuilder.etGlobal.et_notice("multiple-action-error","error",t)},complete:function(){d(".et_li-processing").removeClass("et_li-processing"),etThemeBuilder.etHeader.et_resizable(),etThemeBuilder.etMultipleTemplates.et_conditions(),d("body").removeClass("et_customizer-popup-on").removeClass("et_with-bubble"),d(".et_editing-global").removeClass("et_editing-global"),"save-name"==t&&(l.find(".et_title-editor").addClass("hidden"),l.find(".et_header-title b").text(s).removeClass("hidden"),l.find(".et_header-edit-name").removeClass("hidden"),l.find(".et_header-save-name").addClass("hidden"))}})},et_add_options_devices_dynamic:function(e){var t,i=wp.customize.section(e),i=(wp.customize.section.trigger(i.id,i),i.loaded=!0,i.loadingContainer.fadeOut("slow",function(){d(this).remove()}),"#accordion-section-"+e);d(i).is(".et_device-added")||(d(i).addClass("et_device-added"),t=d("#customize-footer-actions .devices-wrapper").html(),i="#"+d(i).attr("aria-owns"),d.each(d(i).find("li[id*=_et-mobile], li[id*=_et-tablet], li[id*=_et-desktop]"),function(){var e=d(this).attr("id");e=(e=(e=e.replace("_et-mobile","")).replace("_et-tablet","")).replace("_et-desktop",""),1<d("li[id*="+e+"_et]").length&&d(this).addClass("multi-device").prepend(t)})),"mobile_panel"==e&&d(".devices-wrapper .preview-mobile").trigger("click")},et_conditions_save_all:function(i){var a=[],o=[],n=0,r="header";d(".et_customizer-builder.loaded").hasClass("et_customizer-builder-header")?r="header":d(".et_customizer-builder.loaded").hasClass("et_customizer-builder-single_product")&&(r="single-product"),d.each(d(".et_condition"),function(){var e,t;d(this).hasClass("et_to-remove")?o[n++]=d(this).attr("data-condition"):(e=(e=d(this).find(".secondary-select:not(.hidden)").val())&&!["site","select","all_singular","front_page","attachment","not_found","all_archives","author","date","search"].includes(e)?JSON.parse(e):e||"",t=d(this).find(".primary-select").val(),"single-product"==r&&(t=JSON.parse(t)),t={header:i,primary:t,secondary:e,third:d(this).find(".third-select").val(),condition:d(this).attr("data-condition"),"sub-items":d(this).find(".sub-items").prop("checked")||!1,language:d(this).find(".et-languages-select").val()||!1},a[n++]=t)}),d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_conditions_actions",type:"save_all",data_save:a,data_remove:o,builder:r},dataType:"json",success:function(e){d(".et_customizer-builder.loaded .et_builder-multiples .et_builder-multiple-content").html(e.headers);e=d(".et_customizer-builder.loaded .et_builder-multiples .et_builder-multiple-content ul li").length;d(".et_customizer-builder.loaded .multiple-count").html(e),"header"==r&&d(".et_customizer-popup").removeClass("loading")},error:function(e){etThemeBuilder.etGlobal.et_notice("conditions-save","error")},complete:function(e){d(document).find(".et_close-popup").trigger("click")}})},et_conditions:function(){var a="header",o=["site","select","all_singular","front_page","attachment","not_found","all_archives","author","date","search"];function n(e,t,i){t?(i=JSON.parse(i),["product_cat","product_tag","brand","category","post_tag","portfolio_category"].includes(i.slug)?e.find(".sub-items-section").removeClass("hidden").addClass("active"):e.find(".sub-items-section").removeClass("active").addClass("hidden")):e.find(".sub-items-section").removeClass("active").addClass("hidden")}d(document).on("change",".primary-select",function(){d(".et_customizer-builder.loaded").hasClass("et_customizer-builder-header")?a="header":d(".et_customizer-builder.loaded").hasClass("et_customizer-builder-single_product")&&(a="single-product");var e,t=d(this).val(),i=d(this).parents(".et_condition");"header"==a?(n(i,!1,!1),i.find(".secondary-select").addClass("hidden"),e=".secondary-select.secondary-"+d(this).val(),(e=i.find(e)).removeClass("hidden"),o.includes(e.val())||o.includes(t)||e.val().includes("post_type_archive")?(i.find(".select2-selection.select2-selection--single").addClass("hidden"),i.find(".third-select").removeClass("active")):(i.find(".select2-selection.select2-selection--single.hidden").removeClass("hidden"),i.find(".third-select").addClass("active"))):"single-product"==a&&("all"==(t=JSON.parse(d(this).val())).slug&&"all"==t.type?(i.find(".select2-selection.select2-selection--single").addClass("hidden"),i.find(".et_select2-holder").addClass("hidden"),n(i,!1,d(this).val())):(i.find(".et_select2-holder").removeClass("hidden"),i.find(".select2-selection.select2-selection--single.hidden").removeClass("hidden"),i.find(".third-select").addClass("active"),i.find(".third-select").val("").trigger("change"),n(i,!0,d(this).val())))}),d.each(d(".third-select:not(.active)"),function(){var e="",e=(d(this).hasClass("hidden")&&(e="hidden"),d(".et_customizer-builder.loaded").hasClass("et_customizer-builder-header")?a="header":d(".et_customizer-builder.loaded").hasClass("et_customizer-builder-single_product")&&(a="single-product"),d(this).select2({containerCssClass:e,ajax:{url:ajaxurl,dataType:"json",data:function(e){var t="";return"header"==a?t=d(this).parents("li").find(".secondary-select:not(.hidden)").val():"single-product"==a&&(t=d(this).parents("li").find(".primary-select").val()),{search:e.term,action:"et_ajax_conditions_data",data:JSON.parse(t)}},processResults:function(e){return{results:e}}}}));e.data("select2")&&e.data("select2").on("open",function(e){this.results.clear(),this.dropdown._positionDropdown()})}),d(document).on("change",".secondary-select",function(){var e=d(this).parents(".et_condition");o.includes(d(this).val())||d(this).val().includes("post_type_archive")?(e.find(".select2-selection.select2-selection--single").addClass("hidden"),e.find(".et_select2-holder").addClass("hidden"),e.find(".third-select").removeClass("active"),n(e,!1,!1)):(e.find(".select2-selection.select2-selection--single.hidden").removeClass("hidden"),e.find(".et_select2-holder").removeClass("hidden"),e.find(".third-select").addClass("active"),n(e,!0,d(this).val())),e.find(".third-select").val("").trigger("change")})},et_conditions_actions:function(){var n=["site","select","all_singular","front_page","attachment","not_found","all_archives","author","date","search"];d(document).on("click",".et_condition-action",function(){var e="header",t=(d(".et_customizer-builder.loaded").hasClass("et_customizer-builder-header")?e="header":d(".et_customizer-builder.loaded").hasClass("et_customizer-builder-single_product")&&(e="single-product"),d(this).attr("data-action")),i={},a=d(this).parents(".et_condition"),o=(o=a.find(".secondary-select:not(.hidden)").val())&&!n.includes(o)?JSON.parse(o):o||"";if("save"==t)i={header:d(".et_headers-multiple-content .editing").attr("data-header"),primary:a.find(".primary-select").val(),secondary:o,third:a.find(".third-select").val(),condition:a.attr("data-condition")};else{if("remove"==t)return void a.addClass("et_to-remove hidden");if("save_all"==t)return d(".et_customizer-popup").addClass("loading"),void etThemeBuilder.etMultipleTemplates.et_conditions_save_all(d(".et_conditions").attr("data-header"))}d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_conditions_actions",type:t,data:i,builder:e},dataType:"json",success:function(e){"add"==t&&(d(".et_conditions").append(d(e.template).find(".et_condition")),etThemeBuilder.etMultipleTemplates.et_conditions())},error:function(e){etThemeBuilder.etGlobal.et_notice("conditions-select-data","error")},complete:function(){}})})}},etPresets:{et_init:function(){wp.customize.panel("header-builder")&&(d(document).on("change","#input_header_presets_package_et-desktop",function(){var e=wp.customize.control("header_presets_package_et-desktop").setting.get();etThemeBuilder.etMultipleTemplates.et_get_ajax_options(),d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_presets",preset:e},dataType:"json",success:function(e){var t=d(".et_customizer-builder").attr("class"),i=encodeURI(e.connect_block_package),i=(wp.customize.control("header_top_elements").setting.set(e.header_top_elements),wp.customize.control("header_main_elements").setting.set(e.header_main_elements),wp.customize.control("header_bottom_elements").setting.set(e.header_bottom_elements),wp.customize.control("connect_block_package").setting.set(i),d(e.template).find(".et_desktop-mod")),i=d(i).removeClass("hidden");d(".et_customizer-builder").find(".et_desktop-mod").replaceWith(i),d(".et_customizer-builder").attr("class",t),d.each(e.options,function(e,t){wp.customize.control(e)&&wp.customize.control(e).setting.set(t)}),etThemeBuilder.etHeader.et_sortable(),etThemeBuilder.etHeader.et_resizable(),d(".et_customizer-builder").find("> .et-message").remove(),d(".et_customizer-builder").prepend('<div class="et-message et-warning" style="margin:0 -15px;">Please, save your changes and reload your page after you have chosen your template.</div>')},error:function(e){etThemeBuilder.etGlobal.et_notice("get-preset","error")},complete:function(){setTimeout(function(){d(".et_customizer-builder").find("> .et-message").fadeOut()},2e4)}})}),d(document).on("change","#input_header_presets_package_et-mobile",function(){var e=wp.customize.control("header_presets_package_et-mobile").setting.get();d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_presets",preset:e},dataType:"json",success:function(e){var t=d(".et_customizer-builder").attr("class"),i=encodeURI(e.connect_block_mobile_package),i=(wp.customize.control("header_mobile_top_elements").setting.set(e.header_mobile_top_elements),wp.customize.control("header_mobile_main_elements").setting.set(e.header_mobile_main_elements),wp.customize.control("header_mobile_bottom_elements").setting.set(e.header_mobile_bottom_elements),wp.customize.control("connect_block_mobile_package").setting.set(i),d(e.template).find(".et_mobile-mod")),i=d(i).removeClass("hidden");d(".et_customizer-builder").find(".et_mobile-mod").replaceWith(i),d(".et_customizer-builder").attr("class",t),d.each(e.options,function(e,t){wp.customize.control(e)&&wp.customize.control(e).setting.set(t)}),etThemeBuilder.etHeader.et_sortable(),etThemeBuilder.etHeader.et_resizable(),d(".et_customizer-builder").find("> .et-message").remove(),d(".et_customizer-builder").prepend('<div class="et-message et-warning" style="margin:0 -15px;">Please, save your changes and reload your page after you have chosen your template.</div>')},error:function(e){etThemeBuilder.etGlobal.et_notice("get-preset","error")},complete:function(){setTimeout(function(){d(".et_customizer-builder").find("> .et-message").fadeOut()},2e4)}})}),d(document).on("change",'[data-id="header_presets_select"]',function(){var t=d(this).parents("li"),e=(t.css("pointer-events","none"),wp.customize.control("header_presets_select").setting.get()),i=d(".wp-customizer");e?(i.addClass("et-preload"),d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_remote_preset",preset:e},dataType:"json",success:function(e){e=JSON.parse(e);i.addClass("et-preload"),etThemeBuilder.etMultipleTemplates.et_get_ajax_options(),i.addClass("et-preload"),etThemeBuilder.etMultipleTemplates.et_render_options(e),i.addClass("et-preload"),etThemeBuilder.etPresets.et_refresh_builder(e),t.css("pointer-events","all")},error:function(e){},complete:function(){}})):t.css("pointer-events","all")}),this.import_export())},et_refresh_builder:function(e,i){"header"==(i=i||"header")?(e.header_top_elements=btoa(e.header_top_elements),e.header_main_elements=btoa(e.header_main_elements),e.header_bottom_elements=btoa(e.header_bottom_elements),e.connect_block_package=btoa(e.connect_block_package),e.header_mobile_top_elements=btoa(e.header_mobile_top_elements),e.header_mobile_main_elements=btoa(e.header_mobile_main_elements),e.header_mobile_bottom_elements=btoa(e.header_mobile_bottom_elements),e.connect_block_mobile_package=btoa(e.connect_block_mobile_package)):(e.product_single_elements=btoa(e.product_single_elements),e.connect_block_product_single_package=btoa(e.connect_block_product_single_package)),d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_builder",options:e,builder:i},dataType:"json",success:function(e){var t;"header"==i?(t=d(".et_customizer-builder-header").attr("class"),d(".et_customizer-builder-header").find(".et_mobile-mod").html(d(e.builder).find(".et_mobile-mod").html()),d(".et_customizer-builder-header").find(".et_desktop-mod").html(d(e.builder).find(".et_desktop-mod").html()),d(".et_customizer-builder-header").attr("class",t),etThemeBuilder.etHeader.et_sortable(),etThemeBuilder.etHeader.et_resizable()):(d(document).find(".et_product-single-wrapper").html(d(e.builder).find(".et_product-single-wrapper").html()),d(document).find(".et_products-elements").html(d(e.builder).find(".et_products-elements").html()),etThemeBuilder.etSections.et_sortable(".et_customizer-builder-single_product"))},error:function(e){etThemeBuilder.etGlobal.et_notice("reset-header-builder","error")},complete:function(){d(".wp-customizer").removeClass("et-preload")}})},et_set_presets:function(){d(document).on("click",".preset-load",function(){var e=d(this).attr("data-preset");d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_presets",preset:e},dataType:"json",success:function(e){var t=d(".et_customizer-builder").attr("class"),i=encodeURI(e.connect_block_package);wp.customize.control("header_top_elements").setting.set(e.header_top_elements),wp.customize.control("header_main_elements").setting.set(e.header_main_elements),wp.customize.control("header_bottom_elements").setting.set(e.header_bottom_elements),wp.customize.control("connect_block_package").setting.set(i),d(".et_customizer-builder").html(e.template),d(".et_customizer-builder").attr("class",t),d.each(e.options,function(e,t){wp.customize.control(e)&&wp.customize.control(e).setting.set(t)}),etThemeBuilder.etHeader.et_sortable(),etThemeBuilder.etHeader.et_resizable()},error:function(e){etThemeBuilder.etGlobal.et_notice("set-preset","error")},complete:function(){}})})},import_export:function(){function i(e){e=JSON.parse(e.target.result);if(!(e.header_top_elements||e.header_main_elements||e.header_bottom_elements||e.product_single_elements))return d("#et_import-file, #et_import-product-file").attr("value",""),void d('.et_header-import .et_import-error[data-type="filedata"]').removeClass("hidden");d(".et_header-import .et_header-import-btn").removeClass("hidden"),etPreImport=e}d(document).on("click",".et_header-import-export .et_header-export-btn",function(){etThemeBuilder.etMultipleTemplates.et_get_ajax_options();var e=etThemeBuilder.etMultipleTemplates.et_get_options(!1),t=d(this).attr("data-file")?d(this).attr("data-file"):"header",e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),i=document.getElementById("et_download-export-file");i.setAttribute("href",e),i.setAttribute("download",t+".json"),i.click()}),d(document).on("click",".et_header-import-btn span",function(){d(".wp-customizer").addClass("et-preload"),etThemeBuilder.etMultipleTemplates.et_get_ajax_options(),etThemeBuilder.etMultipleTemplates.et_render_options(etPreImport),d(this).hasClass("et_single-product-import-btn")?etThemeBuilder.etPresets.et_refresh_builder(etPreImport,"single-product"):etThemeBuilder.etPresets.et_refresh_builder(etPreImport),d(".et_header-import .et_header-import-btn").addClass("hidden"),d("#et_import-file, #et_import-product-file").attr("value","").trigger("change")}),d(document).on("change","#et_import-file, #et_import-product-file",function(e){var t;etPreImport={},d(".et_header-import .et_header-import-btn").addClass("hidden"),d('.et_header-import .et_import-error[data-type="filedata"]').addClass("hidden"),d('.et_header-import .et_import-error[data-type="filetype"]').addClass("hidden"),"application/json"!=e.target.files[0].type?(d("#et_import-file, #et_import-product-file").attr("value",""),d('.et_header-import .et_import-error[data-type="filetype"]').removeClass("hidden")):((t=new FileReader).onload=i,t.readAsText(e.target.files[0]))})}},etSections:{et_init:function(e,t){"object"!=typeof t&&(t={});t=Object.assign({},{sticky:!1},t),this.et_sortable(e),this.et_add_column(e,t),this.et_remove_column(e),this.et_remove_inside(e),this.et_set_options(e),this.et_style_column_popup(e),t.sticky&&this.et_column_popup(e),d.each(d(".et_product-block:not(.et_new-column)"),function(){etThemeBuilder.etGlobal.et_range_fields('[data-id="'+d(this).attr("data-id")+'"] .block-width')}),etThemeBuilder.etGlobal.et_panel_resize(".et_customizer-builder-single_product")},et_show:function(e){e&&(e.removeClass("hidden fadeOut").addClass("slide-top"),setTimeout(function(){e.addClass("loaded")},300))},et_close:function(e){e&&(e.removeClass("slide-top").addClass("fadeOut"),setTimeout(function(){e.removeClass("loaded collapsed").addClass("hidden")},300))},et_sortable:function(e){d(e).find(".et_product-single").sortable({cursorAt:{left:5,top:5},items:".et_product-block:not(.et_new-column)",helper:function(e,t){return'<span class="et_sorting-gost dashicons dashicons-image-rotate-left"></span>'},start:function(e,t){},stop:function(e,t){d.each(d(".et_product-block:not(.et_new-column)"),function(){etThemeBuilder.etSections.et_set_column(d(this))})}}).disableSelection(),d(e+" .et_column-inner, "+e+" .et_column-content").sortable({connectWith:".et_column-content, .et_inside-elements",cursorAt:{left:5,top:5},helper:function(e,t){return this.connectBlock=!1,this.removeData=!1,t.parents(".et_column").hasClass("et_products-elements")&&"connect_block"==t.attr("data-element")&&(this.connectBlock="element-"+etThemeBuilder.etGlobal.et_generate_random(5),t.clone().insertAfter(t),t.attr("data-id",this.connectBlock)),'<span class="et_sorting-gost dashicons dashicons-image-rotate-left"></span>'},over:function(e,t){d(this).addClass("et_sorting-over")},out:function(e,t){d(this).removeClass("et_sorting-over")},start:function(e,t){var i,t=t.item;t.parents(".et_column").hasClass("et_product-block")&&(delete(i=etThemeBuilder.etSections.et_get_data())[d(this).parents(".et_product-block").attr("data-id")].data[t.attr("data-id")],this.removeData=i)},stop:function(e,t){var t=t.item,i=t.parents(".et_product-block");if("connect_block"==t.attr("data-element")&&t.parent().hasClass("et_column-inner"))t.remove();else{if(t.parent().hasClass("et_inside-elements")){if("connect_block"==t.attr("data-element"))return void d(this).sortable("cancel");etThemeBuilder.etSections.et_set_data(this.removeData),d.each(t.parents(".et_popup").find(".et_customizer-element"),function(){etThemeBuilder.etConnectBlock.et_add_inside(d(this))})}else etThemeBuilder.etSections.et_set_data(this.removeData),d.each(i.find(".et_customizer-element"),function(){etThemeBuilder.etSections.et_add_inside(i,d(this))});this.connectBlock&&(etThemeBuilder.etSections.et_set_data(this.removeData),etThemeBuilder.etConnectBlock.et_add_block(this.connectBlock))}}}).disableSelection()},et_column_popup:function(e){d(document).on("click",e+" .et_column-edit",function(){d(".et_popup").remove();var e=d(this),t=e.parents(".et_product-block"),i="",a=etThemeBuilder.etSections.et_get_data()[t.attr("data-id")].sticky,i=(i=(i=(i=(i=(i+='<div class="et_popup ui-draggable ui-draggable-handle et_sticky-popup" data-id="">')+'<div class="et_actions-1">'+'<span class="dashicons dashicons-move"></span>')+("<span>"+t.attr("data-title")+"</span>"))+'<span class="dashicons dashicons-no-alt et_close"></span>'+"</div>")+'<div class="et_inside-wrapper">'+"<label>Select a block from the list for which the content will be fixed. Select <span>'none'</span> to disable fixed content.</label>")+" <select>"+'<option value="false">None</option>';d.each(d(".et_customizer-builder.loaded .et_product-block:not(.et_new-column)"),function(){t.attr("data-id")!=d(this).attr("data-id")&&(a==d(this).attr("data-id")?i+='<option value="'+d(this).attr("data-id")+'" selected>'+d(this).attr("data-title")+"</option>":i+='<option value="'+d(this).attr("data-id")+'">'+d(this).attr("data-title")+"</option>")}),i+=" </select></div></div>",e.parents(".et_customizer-builder").find(".et_header-head").append(i),d(".et_popup").draggable(),d(document).on("click",".et_close, .customize-panel-back",function(){d(".et_popup").remove()}),d(".et_popup select").on("change",function(){t.attr("data-sticky",d(this).val()),etThemeBuilder.etSections.et_set_column(t)})})},et_style_column_popup:function(e){d(document).on("click",e+" .et_style-column",function(e){d(".et_popup").remove();var i=d(this),a=i.parents(".et_product-block"),t="";d(".customize-save-button-wrapper").hasClass("et_save-multiple")&&(t=d(".et_builder-multiple-content.et_product-single-multiple-content .editing").attr("data-header")),d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_template",template:"popup-section-options",id:a.attr("data-id"),style:btoa(a.attr("data-style")?a.attr("data-style"):""),multiple:t},dataType:"html",success:function(e){var t=etThemeBuilder.etGlobal.et_generate_random(7);i.parents(".et_customizer-builder").find(".et_header-head").append(e),d(".et_popup .style-popup-title").html(a.attr("data-title")),d(".et_popup").addClass(t+" for-"+a.attr("data-id")),d(".et_popup").draggable(),etThemeBuilder.etSections.et_close_style_column(),etThemeBuilder.etSections.et_save_style_column(a,t),etThemeBuilder.etSections.et_init_style_column(t)},error:function(e){etThemeBuilder.etGlobal.et_notice("block-style-popup","error")},complete:function(){}})})},et_close_style_column:function(){d(document).on("click",".et_close, .customize-panel-back",function(){d(".et_popup").remove()})},et_save_style_column:function(e,t){d(document).on("click","."+t+".et_popup.for-"+e.attr("data-id")+" .et_column-style-save",function(){var i={};d.each(d(".section-option"),function(e,t){i[d(t).attr("data-option")]=d(t).val()}),e.attr("data-style",JSON.stringify(i)),etThemeBuilder.etSections.et_set_column(e),d(".et_popup").remove()})},et_init_style_column:function(e){d("."+e+'.et_popup [data-option="background-color"]').wpColorPicker(),d("."+e+'.et_popup [data-option="border-color"]').wpColorPicker(),d("."+e+'.et_popup [data-option="color"]').wpColorPicker(),etThemeBuilder.etGlobal.et_range_fields("."+e+" .section-border-radius .block-width"),d(document).on("click","."+e+" .etheme_upload-image, ."+e+" .et-background-image-upload",function(e){e.preventDefault();var i=d(this),a=wp.media.frames.file_frame=wp.media({title:"Select or upload image",library:{type:"image"},button:{text:"Select"},multiple:!1});a.on("select",function(){var e=a.state().get("selection").first().toJSON(),t=i.parents(".section-background-image");t.find(".placeholder.etheme_upload-image").addClass("hidden"),t.find(".attachment-thumb").attr("src",e.url),t.find(".attachment-thumb").removeClass("hidden"),t.find("input.background-image").attr("value",e.id),t.find("input.background-image").change(),t.find(".et-background-image-remove").removeClass("hidden")}),a.open()}),d(document).on("click",".et-background-image-remove",function(e){var t=d(this),i=t.parents(".section-background-image");t.addClass("hidden"),i.find("input.background-image").attr("value",""),i.find(".attachment-thumb").removeClass("hidden"),i.find(".attachment-thumb").addClass("hidden"),i.find(".placeholder.etheme_upload-image").removeClass("hidden"),i.find("input.background-image").change()})},et_remove_column:function(e){d(document).on("click",e+" .et_remove-column",function(e){etThemeBuilder.etSections.et_remove_all_inside(d(this).parents(".et_product-block")),d(this).parents(".et_product-block").remove(),etThemeBuilder.etSections.et_remove_data(d(this).parents(".et_product-block")),etThemeBuilder.etSections.et_disable_sticky(d(this).parents(".et_product-block"))})},et_set_options:function(e){d(document).on("change",e+' .et_product-block .block-width input[type="range"]',function(){etThemeBuilder.etSections.et_set_column(d(this).parents(".et_product-block"))}),d(document).on("input paste change",e+' .et_product-block .block-width input[type="text"]',function(){etThemeBuilder.etSections.et_set_column(d(this).parents(".et_product-block"))}),d(document).on("change",e+" .et_product-block .block-align input",function(){etThemeBuilder.etSections.et_set_column(d(this).parents(".et_product-block"))})},et_add_column:function(a,o){d(document).on("click",a+" .et_new-column",function(e){var t=d(this),i=(t.css("pointer-events","none"),0);d.each(d(a+" .et_product-block:not(.et_new-column)"),function(){parseInt(d(this).attr("data-index"))>i&&(i=parseInt(d(this).attr("data-index")))}),d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_element",elements:"product-column",index:parseInt(i)+1,sticky:o.sticky},dataType:"html",success:function(e){d(a+" .et_product-single-inner").append(e),d.each(d(a+" .et_product-block:not(.et_new-column)"),function(){etThemeBuilder.etGlobal.et_range_fields('[data-id="'+d(this).attr("data-id")+'"] .block-width')}),d.each(d(a+" .et_product-block:not(.et_new-column"),function(){etThemeBuilder.etSections.et_set_column(d(this))}),etThemeBuilder.etSections.et_sortable(a)},error:function(e){etThemeBuilder.etGlobal.et_notice("add-column","error")},complete:function(){t.css("pointer-events","all")}})})},et_get_data:function(){var e=d(".et_customizer-builder.loaded").attr("data-option"),e=wp.customize.control(e).setting.get();return e=e?JSON.parse(e):""},et_set_data:function(e){var t;e&&(t=d(".et_customizer-builder.loaded").attr("data-option"),wp.customize.control(t).setting.set(JSON.stringify(e)))},et_set_column:function(e){var i,t,a=this.et_get_data(),o=".et_customizer-builder.loaded",n=d(o+" .et_product-single .et_product-block").index(e);a?(i=[],t={},d.each(d(o+" .et_product-block:not(.et_new-column"),function(){i.push(d(this).attr("data-id"))}),d.each(a,function(e,t){-1==i.indexOf(e)&&delete a[e]}),a[e.attr("data-id")]&&a[e.attr("data-id")].data&&(t=a[e.attr("data-id")].data),e.attr("data-id")&&(a[e.attr("data-id")]={title:e.attr("data-title"),width:e.find('input[type="range"]').val(),index:n+1,align:e.find(".block-align input:checked").val(),sticky:e.attr("data-sticky"),data:t,style:e.attr("data-style")})):(a={})[e.attr("data-id")]={title:e.attr("data-title"),width:e.find('input[type="range"]').val(),index:n+1,align:"start",sticky:e.attr("data-sticky"),data:{},style:{}},etThemeBuilder.etSections.et_set_data(a)},et_remove_data:function(e){var t=this.et_get_data();delete t[e.attr("data-id")],etThemeBuilder.etSections.et_set_data(t)},et_disable_sticky:function(e){var t,e=d(".et_customizer-builder.loaded").find('.et_column[data-sticky="'+e.attr("data-id")+'"]'),i=e.attr("data-id");e&&i&&((t=this.et_get_data())[i].sticky=!1,e.attr("data-sticky",!1),etThemeBuilder.etSections.et_set_data(t))},et_add_inside:function(e,t){var i=this.et_get_data();i[e.attr("data-id")].data[t.attr("data-id")]={element:t.attr("data-element"),index:e.find(".et_column-content .et_customizer-element").index(t)},etThemeBuilder.etSections.et_set_data(i)},et_remove_inside:function(o){d(document).on("click",o+" .et_actions .et_remove",function(e){var t=d(this).parents(".et_customizer-element"),i=etThemeBuilder.etSections.et_get_data(),a=d(this).parents(".et_product-block").attr("data-id");t.parent().hasClass("et_inside-elements")?(etThemeBuilder.etConnectBlock.et_remove_inside(t),d(this).closest(".et_customizer-element").remove()):(delete i[a].data[t.attr("data-id")],etThemeBuilder.etSections.et_set_data(i)),"connect_block"==t.attr("data-element")?(etThemeBuilder.etConnectBlock.et_remove_all_inside(t.attr("data-id")),etThemeBuilder.etConnectBlock.et_remove_block(t.attr("data-id"))):d(o+" .et_column-inner").append('<div class="et_customizer-element ui-state-default ui-sortable-handle" data-id="'+t.attr("data-id")+'" data-size="1" data-element="'+t.attr("data-element")+'">'+t.html()+"</div>"),t.remove()})},et_remove_all_inside:function(e){var t=etThemeBuilder.etSections.et_get_data(),e=e.attr("data-id"),i={};d.each(t[e].data,function(e,t){"connect_block"!=t.element?i[t.element]="":(etThemeBuilder.etConnectBlock.et_remove_all_inside(e),etThemeBuilder.etConnectBlock.et_remove_block(e))}),d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_element",elements:i},dataType:"html",success:function(e){d(".et_customizer-builder.loaded .et_column-inner").append(e)},error:function(e){etThemeBuilder.etGlobal.et_notice("remove-inside-column","error")},complete:function(){}})}},etConnectBlock:{et_add_block:function(e){var t=this.et_get_package();t[t.length]={id:e,type:"horizontal",separator:"false",align:"center",spacing:"5",data:""},this.et_set_package(t)},et_get_inside:function(e,a){a=a||e.parents(".et_popup").attr("data-id");var o="",e={},t=this.et_get_package();return t.find(function(e,t,i){if(e.id==a)return o=t,!1}),{inside:e=t[o].data?JSON.parse(t[o].data):e,blockID:o}},et_set_inside:function(e,t){var i=this.et_get_package();e=JSON.stringify(e),i[t].data=e,this.et_set_package(i)},et_set_type:function(a,e){var o="",t=this.et_get_package();t.find(function(e,t,i){if(e.id==a)return o=t,!1}),t[o].type=e,this.et_set_package(t)},et_get_type:function(a){var o="",e=this.et_get_package();return e.find(function(e,t,i){if(e.id==a)return o=t,!1}),e[o].type},et_set_separator:function(a,e){var o="",t=this.et_get_package();t.find(function(e,t,i){if(e.id==a)return o=t,!1}),t[o].separator=e,this.et_set_package(t)},et_get_separator:function(a){var o="",e=this.et_get_package();return e.find(function(e,t,i){if(e.id==a)return o=t,!1}),e[o].separator},et_set_align:function(a,e){var o="",t=this.et_get_package();t.find(function(e,t,i){if(e.id==a)return o=t,!1}),t[o].align=e,this.et_set_package(t)},et_get_align:function(a){var o="",e=this.et_get_package();return e.find(function(e,t,i){if(e.id==a)return o=t,!1}),e[o].align},et_add_inside:function(e){var t=this.et_get_inside(e),i=t.blockID,a=d(".et_inside-elements .et_customizer-element").index(e);(t=t.inside)[e.attr("data-element")]={index:a+1},this.et_set_inside(t,i)},et_remove_inside:function(e){var t=e.attr("data-element"),e=this.et_get_inside(e),i=e.blockID;delete(e=e.inside)[t],this.et_set_inside(e,i)},et_remove_all_inside:function(e){var e=this.et_get_inside("",e),t=this.et_get_block_package("selector");d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_get_element",elements:e.inside},dataType:"html",success:function(e){d(t).find(".et_column-inner").append(e),etThemeBuilder.etHeader.et_resizable()},error:function(e){etThemeBuilder.etGlobal.et_notice("remove-all-inside-block","error")},complete:function(){}})},et_remove_block:function(i){var e=this.et_get_package(),a="";d.each(e,function(e,t){t.id==i&&(a=e)}),e.splice(a,1),this.et_set_package(e)},et_convert_data:function(e,t){return e=t?(e=decodeURI(e),JSON.parse(e)):(e=JSON.stringify(e),encodeURI(e))},et_get_package:function(){var e=this.et_get_block_package("id"),e=wp.customize.control(e).setting.get();return this.et_convert_data(e,!0)},et_set_package:function(e){var t=this.et_get_block_package("id");e=this.et_convert_data(e,!1),wp.customize.control(t).setting.set(e)},et_get_block_package:function(e){var t="connect_block_package",i=".et_desktop-mod";return d(".et_customizer-builder-single_product").hasClass("loaded")?(t="connect_block_product_single_package",i=".et_customizer-builder-single_product"):d(".et_customizer-builder-archive_product").hasClass("loaded")?(t="connect_block_product_archive_package",i=".et_customizer-builder-archive_product"):d(".wp-full-overlay").hasClass("preview-mobile")&&(t="connect_block_mobile_package",i=".et_mobile-mod"),"id"==e?t:i},et_get_spacing:function(a,e){var o="",t=this.et_get_package();return t.find(function(e,t,i){if(e.id==a)return o=t,!1}),t[o].spacing},et_set_spacing:function(a,e){var o="",t=this.et_get_package();t.find(function(e,t,i){if(e.id==a)return o=t,!1}),t[o].spacing=e,this.et_set_package(t)},et_popup:function(e){var t=e.parents('[data-element="connect_block"]'),e=t.attr("data-id"),i=this.et_get_inside("",e),a=this.et_get_type(e),o=this.et_get_separator(e),n=this.et_get_align(e),r=this.et_get_spacing(e);t.addClass("et_popup-open"),d(".et_popup").remove(),d.ajax({url:ajaxurl,method:"POST",data:{action:"et_ajax_popup",elements:i.inside,type:a,separator:o,align:n,spacing:r,id:e},dataType:"html",success:function(e){t.parents(".et_customizer-builder").find(".et_header-head").append(e),etThemeBuilder.etGlobal.et_range_fields("#et_popup-slider"),d(".et_popup").draggable(),d(".et_inside-elements").sortable({stop:function(e,t){t=t.item;d.each(t.parents(".et_popup").find(".et_customizer-element"),function(){etThemeBuilder.etConnectBlock.et_add_inside(d(this))})}}).disableSelection()},error:function(e){etThemeBuilder.etGlobal.et_notice("block-popup","error")},complete:function(){}}),d(document).on("change","#block_type",function(){var e="horizontal",t=(d(this).is(":checked")&&(e="vertical"),d(this).parents(".et_popup").attr("data-id"));etThemeBuilder.etConnectBlock.et_set_type(t,e)}),d(document).on("change","#block_separator",function(){var e="false",t=(d(this).is(":checked")&&(e="true"),d(this).parents(".et_popup").attr("data-id"));etThemeBuilder.etConnectBlock.et_set_separator(t,e)}),d(document).on("change","#input_block_align input",function(){var e=d(this).parent().find("input:checked").val(),t=d(this).parents(".et_popup").attr("data-id");etThemeBuilder.etConnectBlock.et_set_align(t,e)}),d(document).on("mousemove change",'#et_popup-slider input[type="range"]',function(){var e=d(this).val(),t=d(this).parents(".et_popup").attr("data-id");etThemeBuilder.etConnectBlock.et_set_spacing(t,e)}),d(document).on("input paste change",'#et_popup-slider input[type="text"]',function(){var e=d(this).val(),t=d(this).parents(".et_popup").attr("data-id");etThemeBuilder.etConnectBlock.et_set_spacing(t,e)}),d(document).on("click",".et_close, .et_button.mobile, .et_button.desktop, .customize-panel-back",function(){t.removeClass("et_popup-open"),d(".et_popup").remove()})}},etHeader:{et_init:function(){this.et_remove(),this.et_force_resize(),this.et_sortable(),this.et_resizable(),this.et_external_resize(),etThemeBuilder.etGlobal.et_panel_resize(".et_customizer-builder-header")},et_show:function(){d(".et_customizer-builder.et_customizer-builder-header").removeClass("hidden fadeOut").addClass("slide-top"),setTimeout(function(){d(".et_customizer-builder.et_customizer-builder-header").addClass("loaded")},300)},et_close:function(){d(".et_customizer-builder.et_customizer-builder-header").removeClass("slide-top").addClass("fadeOut"),setTimeout(function(){d(".et_customizer-builder.et_customizer-builder-header").removeClass("loaded collapsed").addClass("hidden")},200)},et_sortable:function(){d(".et_customizer-builder-header .et_column:not(.et_col-sm-12), .et_customizer-builder-header .et_elements .et_column-inner").sortable({connectWith:".et_column",cursorAt:{left:5,top:5},cancel:".et_popup-open",helper:function(e,t){return this.connectBlock=!1,t.parents(".et_header-part").hasClass("et_elements")&&"connect_block"==t.attr("data-element")&&(this.connectBlock="element-"+etThemeBuilder.etGlobal.et_generate_random(5),t.clone().insertAfter(t),t.attr("data-id",this.connectBlock)),'<span class="et_sorting-gost dashicons dashicons-image-rotate-left"></span>'},start:function(e,t){var t=t.item,i=t.parent();this.startParent=i,this.removeData=!1,this.removeSection=t.parents(".et_header-part").attr("data-section"),d("body").removeClass("et_stop-drop"),i.removeClass("et_has-element")},over:function(e,t){d(this).addClass("et_sorting-over")},out:function(e,t){d(this).removeClass("et_sorting-over")},stop:function(e,t){var o=t.item,n=o.parent(),t=o.outerWidth(),i=o.outerWidth(!0);if(d(".et_sorting-over").removeClass("et_sorting-over"),o.parent().hasClass("et_inside-elements")){if(o.addClass("et_in-popup"),"connect_block"==o.attr("data-element")&&n.hasClass("et_inside-elements"))return this.startParent.hasClass("et_column-inner")?void o.remove():(d(this).sortable("cancel"),void this.startParent.addClass("et_has-element"));etThemeBuilder.etHeader.et_delete_data(o,this.removeSection),d.each(o.parents(".et_popup").find(".et_customizer-element"),function(){etThemeBuilder.etConnectBlock.et_add_inside(d(this))})}else if("connect_block"==o.attr("data-element")&&"et_column-inner"==n.attr("class"))o.remove();else if(o.parents(".et_header-part").hasClass("et_elements"))"connect_block"==o.attr("data-element")&&o.remove();else{var a,r="connect_block"==o.attr("data-element")&&this.startParent.hasClass("et_column-inner");if(n.hasClass("et_has-element"))return r?void o.remove():(d(this).sortable("cancel"),void this.startParent.addClass("et_has-element"));etThemeBuilder.etHeader.et_stop_drop(n,"","",d(this),r,o),d("body").hasClass("et_stop-drop")?this.startParent.addClass("et_has-element"):(n.addClass("et_has-element"),etThemeBuilder.etHeader.et_delete_data(o,this.removeSection),o.outerWidth()<o.parent().width()&&o.outerWidth(o.parent().width()-(i-t)),12==n.attr("data-index")&&1<o.attr("data-size")&&(o.outerWidth(o.parent().width()-(i-t)),o.attr("data-size",1)),o.parents(".et_header-part").find('[data-index="12"]').hasClass("et_has-element")||(a=0,d.each(o.parents(".et_header-part").find(".et_column"),function(){d(this).hasClass("et_has-element")&&(a=d(this).attr("data-index"))}),parseInt(n.attr("data-index"))>=a&&12<parseInt(o.attr("data-size"))+parseInt(n.attr("data-index"))-1&&(r=12-parseInt(n.attr("data-index"))+1,o.attr("data-size",r),o.outerWidth(o.parent().width()*r-(i-t)))),d.each(o.parents(".et_header-part").find(".et_customizer-element:not(.et_in-popup)"),function(){var e,t,i=parseInt(d(this).parent().attr("data-index")),a=parseInt(n.attr("data-index"));a<i&&parseInt(o.attr("data-size"))+a>i&&(e=o.outerWidth(),t=o.outerWidth(!0),o.attr("data-size",i=i-a),o.outerWidth(n.width()*i-(t-e)),etThemeBuilder.etHeader.et_set_data(o,o.parent())),etThemeBuilder.etHeader.et_set_data(d(this),d(this).parent())}),d.each(this.startParent.parents(".et_header-part").find(".et_customizer-element:not(.et_in-popup)"),function(){etThemeBuilder.etHeader.et_set_data(d(this),d(this).parent())}),this.connectBlock&&(etThemeBuilder.etConnectBlock.et_add_block(this.connectBlock),etThemeBuilder.etHeader.et_resizable(o),o.removeClass("et-stuck-block")))}}}).disableSelection()},et_resizable:function(e){(e=e||d(".et_customizer-builder-header .et_customizer-element:not(.et-stuck-block)")).resizable({handles:"e",grid:d(".et_device:not(.hidden) .et_sortable").width(),maxWidth:12*d(".et_device:not(.hidden) .et_sortable").width(),cancel:".et_popup-open",start:function(e,t){var i=t.element,a=i.parent(),o=!1,n=d(this);d.each(i.parents(".et_header-part").find(".et_customizer-element:not(.et_in-popup)"),function(){var e=parseInt(d(this).parent().attr("data-index")),t=parseInt(a.attr("data-index"));if(t<e)return n.resizable("option","maxWidth",(e-t)*a.width()),!(o=!0)}),this.width=t.element.width(),o||d(this).resizable("option","maxWidth",12*a.width())},resize:function(e,t){this.width=t.element.width();var i=Math.ceil(this.width/d(".et_device:not(.hidden) .et_sortable").width());t.element.attr("data-size",i)},stop:function(e,t){var t=t.element,i=t.parent(),a=t.outerWidth(),o=t.outerWidth(!0),n=Math.ceil(this.width/d(".et_device:not(.hidden) .et_sortable").width());t.attr("data-size",n),t.outerWidth(i.width()*n-(o-a)),d(this).resizable("option","maxWidth",12*i.width()),d.each(t.parents(".et_header-part").find(".et_customizer-element:not(.et_in-popup)"),function(){etThemeBuilder.etHeader.et_set_data(d(this),d(this).parent())})}}).disableSelection()},et_force_resize:function(){d.each(d(".et_sortable .et_customizer-element"),function(){var e=d(this).parent(),t=d(this).attr("data-size"),i=d(this).outerWidth(),a=d(this).outerWidth(!0);d(this).outerWidth(e.width()*t-(a-i))})},et_external_resize:function(){d(document).on("click","button.collapse-sidebar",function(){setTimeout(function(){etThemeBuilder.etHeader.et_force_resize(),etThemeBuilder.etHeader.et_resizable()},200)})},et_remove:function(){d(document).on("click",".et_customizer-builder-header .et_remove",function(){var e=d(this).parents(".et_customizer-element");if(e.parent().removeClass("et_has-element"),"connect_block"==e.attr("data-element"))return etThemeBuilder.etConnectBlock.et_remove_all_inside(e.attr("data-id")),etThemeBuilder.etConnectBlock.et_remove_block(e.attr("data-id")),d.each(d(this).parents(".et_header-part").find(".et_customizer-element:not(.et_in-popup)"),function(){etThemeBuilder.etHeader.et_set_data(d(this),d(this).parent())}),etThemeBuilder.etHeader.et_delete_data(e),e.remove(),void etThemeBuilder.etHeader.et_resizable();e.parent().hasClass("et_inside-elements")?(etThemeBuilder.etConnectBlock.et_remove_inside(e),d(this).closest(".et_customizer-element").remove()):(d.each(d(this).parents(".et_header-part").find(".et_customizer-element:not(.et_in-popup)"),function(){etThemeBuilder.etHeader.et_set_data(d(this),d(this).parent())}),etThemeBuilder.etHeader.et_delete_data(e),e.remove());var t=d(".et_desktop-mod");(t=d(".wp-full-overlay").hasClass("preview-mobile")?d(".et_mobile-mod"):t).find(".et_elements .et_column .et_column-inner").append('<div class="et_customizer-element ui-state-default ui-sortable-handle" data-id="'+e.attr("data-id")+'" data-size="1" data-element="'+e.attr("data-element")+'">'+e.html()+"</div>"),etThemeBuilder.etHeader.et_resizable()})},et_delete_data:function(e,t){var i;(t=t||e.parents(".et_header-part").attr("data-section"))&&(delete(i=(i=wp.customize.control(t).setting.get())?JSON.parse(i):{})[e.attr("data-id")],wp.customize.control(t).setting.set(JSON.stringify(i)))},et_stop_drop:function(e,t,i,a,o,n){var r=e.prev();i=i||e,t=t||1,12<=++t||(r.hasClass("et_has-element")?parseInt(r.attr("data-index"))+parseInt(r.find(".et_customizer-element").attr("data-size"))>parseInt(i.attr("data-index"))&&(o?n.remove():a.sortable("cancel"),d("body").addClass("et_stop-drop")):etThemeBuilder.etHeader.et_stop_drop(r,t,i,a,o,n))},et_set_data:function(e,t){var i,a,o;e&&t&&((i=e.parents(".et_header-part").attr("data-section"))&&(a=wp.customize.control(i).setting.get(),etThemeBuilder.etHeader.et_set_offset(t),a?(a=JSON.parse(a),o=[],d.each(d("[data-section="+i+"] .et_customizer-element"),function(){o.push(d(this).attr("data-id"))}),d.each(a,function(e,t){-1==o.indexOf(e)&&delete a[e]}),e.attr("data-id")&&(a[e.attr("data-id")]={size:e.attr("data-size"),index:t.attr("data-index"),offset:e.attr("data-offset"),element:e.attr("data-element")})):(a={})[e.attr("data-id")]={size:e.attr("data-size"),index:t.attr("data-index"),offset:e.attr("data-offset"),element:e.attr("data-element")},wp.customize.control(i).setting.set(JSON.stringify(a))))},et_set_offset:function(e,t,i){var a=e.prev(),o={};o.current={size:(i=i||e).find(".et_customizer-element").attr("data-size"),index:i.attr("data-index")},1==o.current.index?i.find(".et_customizer-element").attr("data-offset",0):(t=t||1,13<=++t||(a.hasClass("et_has-element")?(o.prev={size:a.find(".et_customizer-element").attr("data-size"),index:a.attr("data-index")},e=parseInt(o.current.index)-(parseInt(o.prev.index)+parseInt(o.prev.size)),i.find(".et_customizer-element").attr("data-offset",e)):1!=a.attr("data-index")||a.hasClass("et_has-element")?etThemeBuilder.etHeader.et_set_offset(a,t,i):i.find(".et_customizer-element").attr("data-offset",o.current.index-1)))}}},d(document).ready(function(){etThemeBuilder.init()})}(jQuery);