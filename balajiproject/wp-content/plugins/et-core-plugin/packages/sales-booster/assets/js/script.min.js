var SaleBoosterPopup;!function(r){"use strict";var o,t;SaleBoosterPopup={init:function(){o={mouseover:!1,document_mouseleave:!1,in_process:!1,products:JSON.parse(r("#sales-booster-fake-sale-popup-products").text()),i:0},r("#sales-booster-popup").length&&0<o.products.length&&(t={wrapper:r("#sales-booster-popup"),inner:r("#sales-booster-popup .sales-booster-popup-inner"),repeat_every:r("#sales-booster-popup").data("repeat-time")},this.helpers(),this.renderContentPopup(),this.closePopup())},helpers:function(){t.wrapper.off("mousedown").on("mousedown"),t.wrapper.bind("click").trigger("click")},renderProduct:function(){var e;r("html").hasClass("et-mini-content-opened")||o.mouseover||t.wrapper.hasClass("loaded")||(e=r.makeArray(o.products[o.i]).map(function(e){return wp.template("sales-booster-fake-sale-popup")(e)}).join(""),t.wrapper.addClass("loaded"),SaleBoosterPopup.audio(),t.inner.html(e),setTimeout(function(){o.mouseover||t.wrapper.removeClass("loaded")},t.repeat_every/2*1e3),o.products.length>o.i+1?o.i++:o.i=0)},renderContentPopup:function(){setInterval(SaleBoosterPopup.renderProduct,1e3*t.repeat_every);t.wrapper.on("mouseover",function(){o.mouseover=!0}).on("mouseleave",function(){o.mouseover=!1,setTimeout(function(){o.mouseover||t.wrapper.removeClass("loaded")},t.repeat_every/2*1e3)})},closePopup:function(){t.wrapper.on("click",".close",function(){t.wrapper.removeClass("loaded"),setTimeout(function(){t.wrapper.remove(),r("#sales-booster-popup-audio").remove()},t.repeat_every/2*1e3)})},audio:function(){var e,o;0<r("#sales-booster-popup-audio").length&&(e=document.getElementById("sales-booster-popup-audio"),o=function(){e.play().then(function(){setTimeout(function(){e.pause(),e.currentTime=0},0)}),document.removeEventListener("touchstart",o,!1)},document.addEventListener("touchstart",o,!1),e.play())}},r(document).ready(function(){SaleBoosterPopup.init()})}(jQuery);