var ApplyFilters;!function(s){"use strict";var l,d;ApplyFilters={init:function(){l={},d={},this.loadedParams(),this.CollectParams(),this.ajaxRequest(),setTimeout(function(){s(".price_slider").parents("form").addClass("et-reinited")},100)},SetupClass:function(e){var t=e.parents("li");e.parents("ul").hasClass("st-swatch-preview")?t.addClass("selected chosen"):e.parents(".sidebar-widget").hasClass("etheme_widget_brands")?t.addClass("current-item"):t.addClass("chosen")},loadedParams:function(){s.each(ApplyFilters.GetUrlParams(location.href),function(e,t){t&&"undefined"!=t&&(l[e]?l[e].includes(t)||(l[e]+=","+t,d[e]+=","+t):(l[e]=t,d[e]=t))})},GetUrlParams:function(e){var t={},i=document.createElement("a"),e=(i.href=e,i.search.substring(1));if(!e)return!1;var a=e.split("&");for(let e=0;e<a.length;e++){var n=a[e].split("=");t[n[0]]=decodeURIComponent(n[1])}return t},ReinitPriceSlider:function(){if(s(".price_slider").length){if("undefined"==typeof woocommerce_price_slider_params)return!1;s("input#min_price, input#max_price").hide(),s(".price_slider, .price_label").show();let e=s(".price_slider_amount #min_price"),t=s(".price_slider_amount #max_price"),i=e.data("min"),a=t.data("max"),n=parseInt(e.val()?e.val():i,10),r=parseInt(t.val()?t.val():a,10);d.min_price&&(n=d.min_price),d.max_price&&(r=d.max_price),s(".price_slider").slider({range:!0,animate:!0,min:i,max:a,values:[n,r],create:function(){e.val(n),t.val(r),s(document.body).trigger("price_slider_create",[n,r])},slide:function(e,t){s("input#min_price").val(t.values[0]),s("input#max_price").val(t.values[1]),s(document.body).trigger("price_slider_slide",[t.values[0],t.values[1]])},change:function(e,t){s(document.body).trigger("price_slider_change",[t.values[0],t.values[1]])}})}setTimeout(function(){s(".price_slider").parents("form").addClass("et-reinited")},100)},ajaxRequest:function(){if(Object.keys(d).length){s(this).attr("href");let e=window.location.href;var r=e.split("?")[0];e=e.split("?")[0]+"?et_ajax=true",s.ajax({url:e,method:"GET",timeout:1e5,dataType:"text",beforeSend:function(){s(".sidebar.et-mini-content.active").removeClass("active"),s(".et-toggle-mob-sidebars-wrapper").removeClass("et-content-shown")},success:function(e){var t=s(e).find(".sidebar").html(),i=s(document).find(".etheme-active-filters").next("div").attr("id"),a=s(document).find(".etheme-active-filters").prev("div").attr("id"),n=s(document).find(".etheme-active-filters").clone();s(".content-page .sidebar").html(t),s(document).find(".etheme-active-filters")||(i?s(document).find("#"+i).before(n):a&&s(document).find("#"+a).before(n)),s.each(d,function(i,e){var t=e.split(",");1<t.length?s.each(t,function(e,t){ApplyFilters.SetupClass(s(document).find('a[href="'+r+"?"+i+"="+t+'"]'))}):ApplyFilters.SetupClass(s(document).find('a[href="'+r+"?"+i+"="+e+'"]'))}),jQuery().selectWoo&&s.each(s("select.woocommerce-widget-layered-nav-dropdown"),function(){var e=s(this);jQuery(e).selectWoo({minimumResultsForSearch:5,width:"100%",language:{noResults:function(){}}})}),"undefined"==typeof woocommerce_price_slider_params&&(t=s(e).find(".et_woocommerce_price_slider_params").html(),s("body").prepend(t)),etTheme.AjaxElement(),s(document).trigger("et_ajax_content_loaded")},error:function(e){etTheme.et_notice("ajax-filters","error")},complete:function(){s(".et-loader.product-ajax").removeClass("loading"),void 0!==etTheme.reinitSwatches&&etTheme.reinitSwatches(),void 0!==etTheme.contentProdImages&&etTheme.contentProdImages(),void 0!==window.hoverSlider&&(window.hoverSlider.init({}),window.hoverSlider.prepareMarkup()),void 0!==etTheme.countdown&&etTheme.countdown(),s("body").removeClass("swc-default-done"),void 0!==etTheme.widgetsOpenCloseDefault&&etTheme.widgetsOpenCloseDefault(),ApplyFilters.ReinitPriceSlider(),etTheme.resizeVideo(),etTheme.swiperFunc(),etTheme.secondInitSwipers(),etTheme.customCss(),etTheme.customCssOne(),void 0!==etTheme.sidebarCanvas&&etTheme.sidebarCanvas(),void 0!==etTheme.stickySidebar&&s(document.body).trigger("sticky_kit:recalc"),s(document).trigger("yith_wcwl_reload_fragments"),s("body").removeClass("ajax-progress"),etTheme.global_image_lazy(),void 0!==etTheme.widgetsShowMore&&etTheme.widgetsShowMore()}})}},CollectParams:function(){s(document).on("click",".content-page .etheme-ajax-filter, .content-page .etheme_swatches_filter ul li a, .content-page .woocommerce-widget-layered-nav ul li a, .content-page .widget_rating_filter ul li a, .content-page .widget_layered_nav_filters ul li a, .content-page .etheme_widget_brands_filter ul li a",function(i){var a=s(this),n=a.parents("li"),r=!1;if(a.parents("div").hasClass("etheme-active-filters"))"undefined"!=typeof ajaxFilters?(i.preventDefault(),d=l={},ajaxFilters.load_data(a.attr("href"),function(){})):location.href=url;else{i.preventDefault(),a.parents("ul").hasClass("st-swatch-preview")?n.hasClass("selected")?(n.removeClass("selected"),r=!0):n.addClass("selected"):a.parents(".sidebar-widget").hasClass("etheme_widget_brands")?n.hasClass("current-item")?(r=!0,n.removeClass("current-item")):n.addClass("current-item"):n.hasClass("chosen")?(r=!0,n.removeClass("chosen")):n.addClass("chosen");let e=s(this).attr("href"),t=window.location.href;s(this).hasClass("remove-brand")||s(this).parents(".widget_layered_nav_filters").hasClass("etheme-active-filters")||1<t.indexOf("filter_brand")&&(i=new URL(t).searchParams.get("filter_brand"),e=e.replace("?","?filter_brand="+i+"&"));a=ApplyFilters.GetUrlParams(e);s.each(a,function(i,e){var t;i&&(r?(l[i]&&(!e||"undefined"==e||""==e)||e==l[i]?delete l[i]:l[i].includes(e)&&(l[i]=l[i].replace(e,"").replace(",,",","),","==l[i].charAt(0)&&(l[i]=l[i].substring(1)),","==l[i].slice(-1))&&(l[i]=l[i].slice(0,-1)),""==l[i]&&delete l[i]):l[i]?l[i].includes(e)||(e.includes(",")?(t=e.split(","),s.each(t,function(e,t){l[i].includes(t)||(l[i]+=","+t)})):l[i]+=","+e):l[i]=e)}),Object.keys(l).length?s(document).find(".etheme_apply_all_filters").removeClass("hidden"):s(document).find(".etheme_apply_all_filters").addClass("hidden")}}),s(document).on("price_slider_change",function(){s(".et-reset-price").removeClass("hidden");var e=s(this).find(".etheme-price-filter form").first();!e||e.length<1||!e.hasClass("et-reinited")||(e=e.attr("action")+"?"+e.serialize(),e=ApplyFilters.GetUrlParams(e),s.each(e,function(e,t){"et_ajax"!=e&&"undefined"!=t&&(l[e]=t)}),Object.keys(l).length?s(document).find(".etheme_apply_all_filters").removeClass("hidden"):s(document).find(".etheme_apply_all_filters").addClass("hidden"))}),s(document).on("change",".content-page select.woocommerce-widget-layered-nav-dropdown",function(e){let t=s(this),i=t.attr("class"),a="";i=i.split(" "),s.each(i,function(e,t){t.includes("dropdown_layered_nav_")&&(a=t.replace("dropdown_layered_nav_",""))}),a="filter_"+a,l[a]=t.val(),Object.keys(l).length?s(document).find(".etheme_apply_all_filters").removeClass("hidden"):s(document).find(".etheme_apply_all_filters").addClass("hidden")}),s(document).on("click",".etheme-all-filter",function(e){e.preventDefault();let i=s(this).attr("href");i+="?",s.each(l,function(e,t){i+=e+"="+t+"&"}),"&"==i.slice(-1)&&(i=i.slice(0,-1)),"undefined"!=typeof ajaxFilters?(d=l,ajaxFilters.load_data(i,function(){ApplyFilters.ajaxRequest()})):location.href=i})}},s(document).ready(function(){ApplyFilters.init()})}(jQuery);