!function(a){"use strict";etTheme.autoinit.reviewsImages=etTheme.reviewsImages=function(){a("form.comment-form").attr("enctype","multipart/form-data");var i=a(".comment-form"),n=i.find("#et-reviews-images-uploader"),t=i.find(".et-reviews-images-info"),e=i.find("#et-reviews-images-reset"),s=i.find(".et-reviews-images-previewer"),r=[];function m(e){t.after('<div class="et-reviews-images-message et-reviews-images-error">'+e+"</div>")}0!==n.length&&(a.each(et_reviews_images_config.comment_images_upload_mimes,function(e,i){r.push(String(i))}),n.on("change",function(){"yes"===et_reviews_images_config.comment_images_preview&&(i.find("#et-reviews-images-reset").trigger("click"),n[0].files.length)&&Array.prototype.forEach.call(n[0].files,function(e){e&&s.append('<img src="'+URL.createObjectURL(e)+'"/>')}),n[0].files.length&&(i.find(".et-reviews-images-count").text(et_reviews_images_config.comment_images_added_count_text.replace("%s",this.files.length)),e.removeClass("hidden"))}),e.on("click",function(){n.value="",s.html(""),i.find(".et-reviews-images-count").html(""),a(this).addClass("hidden")}),i.on("submit",function(e){i.find(".et-reviews-images-error").remove();var t=!1,s=!1;n[0].files.length>et_reviews_images_config.comment_images_count&&(m(et_reviews_images_config.comment_images_count_text),e.preventDefault()),n[0].files.length<=0&&"yes"===et_reviews_images_config.single_product_comment_images_required&&(m(et_reviews_images_config.comment_required_images_error_text),e.preventDefault()),Array.prototype.forEach.call(n[0].files,function(e){var i=e.size,e=String(e.type);i>et_reviews_images_config.comment_images_upload_size&&(t=!0),a.inArray(e,r)<0&&(s=!0)}),t&&(m(et_reviews_images_config.comment_images_upload_size_text),e.preventDefault()),s&&(m(et_reviews_images_config.comment_images_upload_mimes_text),e.preventDefault())}))}}(jQuery);