var postBackstretch;!function(k,_,T){"use strict";function w(t){return e.hasOwnProperty(t)?t:"cover"}function d(t){return c.test(t.url)||t.isVideo}var p,c=/^.*(youtu\.be\/|youtube\.com\/v\/|youtube\.com\/embed\/|youtube\.com\/watch\?v=|youtube\.com\/watch\?.*\&v=)([^#\&\?]*).*/i,o=(k.fn.backstretch=function(r,a){var n,s=arguments;return 0===k(_).scrollTop()&&_.scrollTo(0,0),this.each(function(t){var e,i=k(this),o=i.data("backstretch");if(o){if("string"==typeof s[0]&&"function"==typeof o[s[0]])return void((e=(e=o[s[0]].apply(o,Array.prototype.slice.call(s,1)))===o?T:e)!==T&&((n=n||[])[t]=e));a=k.extend(o.options,a),"object"==typeof o&&"destroy"in o&&o.destroy(!0)}r&&0!==r.length||((t=i.css("background-image"))&&"none"!==t?r=[{url:i.css("backgroundImage").replace(/url\(|\)|"|'/g,"")}]:k.error("No images were supplied for Backstretch, or element must have a CSS-defined background image.")),o=new h(this,r,a||{}),i.data("backstretch",o)}),n?1===n.length?n[0]:n:this},k.backstretch=function(t,e){return k("body").backstretch(t,e).data("backstretch")},k.expr[":"].backstretch=function(t){return k(t).data("backstretch")!==T},k.fn.backstretch.defaults={duration:5e3,transition:"fade",transitionDuration:0,animateFirst:!0,alignX:.5,alignY:.5,paused:!1,start:0,preload:2,preloadSize:1,resolutionRefreshRate:2500,resolutionChangeRatioThreshold:.1},{wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},itemWrapper:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"100%",height:"100%",zIndex:-999999},item:{position:"absolute",margin:0,padding:0,border:"none",width:"100%",height:"100%",maxWidth:"none"}}),$=function(t,e){for(var i,o=t.width(),r=t.height(),a=[],n=function(t,e){return"width"===e?o:"height"===e?r:t},s=0;s<e.length;s++)k.isArray(e[s])?(e[s]=function(t){for(var e=1;e<t.length;e++){for(var i=t[e],o=e;t[o-1]&&parseInt(t[o-1].width,10)>parseInt(i.width,10);)t[o]=t[o-1],--o;t[o]=i}return t}(e[s]),i=function(t,e,i){for(var o,r,a=_.devicePixelRatio||1,n=v(),s=(b(),t<e?"portrait":e<t?"landscape":"square"),c=0,h=0;h<i.length&&((r="string"==typeof(r=i[h])?i[h]={url:r}:r).pixelRatio&&"auto"!==r.pixelRatio&&parseFloat(r.pixelRatio)!==a||r.deviceOrientation&&r.deviceOrientation!==n||r.windowOrientation&&r.windowOrientation!==n||r.orientation&&r.orientation!==s||(c=h,o=t,"auto"===r.pixelRatio&&(t*=a),!(r.width>=o)));h++);return i[Math.min(h,c)]}(o,r,e[s]),a.push(i)):("string"==typeof e[s]&&(e[s]={url:e[s]}),(i=k.extend({},e[s])).url=l(i.url,n),a.push(i));return a},x=(p=[],function t(e,i,o,r,a){if(void 0!==e){k.isArray(e)||(e=[e]),arguments.length<5&&"function"==typeof arguments[arguments.length-1]&&(a=arguments[arguments.length-1]),i="function"!=typeof i&&i?i:0,o="function"==typeof o||!o||o<0?e.length:Math.min(o,e.length),r="function"!=typeof r&&r?r:1,i>=e.length&&(o=i=0),r<0&&(r=o),r=Math.min(r,o);var n=e.slice(i+r,o-r);if(e=e.slice(i,r),o=e.length)for(var s,c=0,h=function(){++c===o&&(u(e,a,!n),t(n,0,0,r,a))},l=0;l<e.length;l++)d(e[l])||((s=new Image).src=e[l].url,(s=function(t){for(var e=0;e<p.length;e++)if(p[e].src===t.src)return p[e];return p.push(t),t}(s)).complete?h():k(s).on("load error",h));else u(e,a,!0)}}),r=function(t){for(var e=[],i=0;i<t.length;i++)"string"==typeof t[i]?e.push({url:t[i]}):k.isArray(t[i])?e.push(r(t[i])):e.push(a(t[i]));return e},a=function(t,e){return(t.centeredX||t.centeredY)&&(_.console&&_.console.log&&_.console.log("jquery.backstretch: `centeredX`/`centeredY` is deprecated, please use `alignX`/`alignY`"),t.centeredX&&(t.alignX=.5),t.centeredY)&&(t.alignY=.5),t.speed!==T&&(_.console&&_.console.log&&_.console.log("jquery.backstretch: `speed` is deprecated, please use `transitionDuration`"),t.transitionDuration=t.speed,t.transition="fade"),t.resolutionChangeRatioTreshold!==T&&(_.console.log("jquery.backstretch: `treshold` is a typo!"),t.resolutionChangeRatioThreshold=t.resolutionChangeRatioTreshold),t.fadeFirst!==T&&(t.animateFirst=t.fadeFirst),t.fade!==T&&(t.transitionDuration=t.fade,t.transition="fade"),t.scale&&(t.scale=w(t.scale)),i(t)},i=function(t,e){return"left"===t.alignX?t.alignX=0:"center"===t.alignX?t.alignX=.5:"right"===t.alignX?t.alignX=1:(t.alignX!==T||e)&&(t.alignX=parseFloat(t.alignX),isNaN(t.alignX))&&(t.alignX=.5),"top"===t.alignY?t.alignY=0:"center"===t.alignY?t.alignY=.5:"bottom"===t.alignY?t.alignY=1:(t.alignX!==T||e)&&(t.alignY=parseFloat(t.alignY),isNaN(t.alignY))&&(t.alignY=.5),t},e={cover:"cover",fit:"fit","fit-smaller":"fit-smaller",fill:"fill"},h=function(t,e,i){this.options=k.extend({},k.fn.backstretch.defaults,i||{}),this.firstShow=!0,a(this.options,!0),this.images=r(k.isArray(e)?e:[e]),this.options.paused&&(this.paused=!0),this.options.start>=this.images.length&&(this.options.start=this.images.length-1),this.options.start<0&&(this.options.start=0),this.isBody=t===document.body;var i=k(_),e=(this.$container=k(t),this.$root=this.isBody?I?i:k(document):this.$container,this.originalImages=this.images,this.images=$(this.options.alwaysTestWindowResolution?i:this.$root,this.originalImages),x(this.images,this.options.start||0,this.options.preload||1),this.$container.children(".backstretch").first());this.$wrap=e.length?e:k('<div class="backstretch"></div>').css(this.options.bypassCss?{}:o.wrap).appendTo(this.$container),this.options.bypassCss||(this.isBody||(t=this.$container.css("position"),e=this.$container.css("zIndex"),this.$container.css({position:"static"===t?"relative":t,zIndex:"auto"===e?0:e}),this.$wrap.css({zIndex:-999998})),this.$wrap.css({position:this.isBody&&I?"fixed":"absolute"})),this.index=this.options.start,this.show(this.index),i.on("resize.backstretch",k.proxy(this.resize,this)).on("orientationchange.backstretch",k.proxy(function(){this.isBody&&0===_.pageYOffset&&(_.scrollTo(0,1),this.resize())},this))};function u(t,e,i){"function"==typeof e&&e.call(t,i)}function l(t,e){if("string"==typeof t)t=t.replace(/{{(width|height)}}/g,e);else if(t instanceof Array)for(var i=0;i<t.length;i++)t[i].src?t[i].src=l(t[i].src,e):t[i]=l(t[i],e);return t}h.prototype={resize:function(){try{var t,e=this.options.alwaysTestWindowResolution?k(_):this.$root,i=e.width(),o=e.height(),r=i/(this._lastResizeContainerWidth||0),a=o/(this._lastResizeContainerHeight||0),n=this.options.resolutionChangeRatioThreshold||0;i===this._lastResizeContainerWidth&&o===this._lastResizeContainerHeight||!(Math.abs(r-1)>=n||isNaN(r)||Math.abs(a-1)>=n||isNaN(a))||(this._lastResizeContainerWidth=i,this._lastResizeContainerHeight=o,this.images=$(e,this.originalImages),this.options.preload&&x(this.images,(this.index+1)%this.images.length,this.options.preload),1!==this.images.length)||this._currentImage.url===this.images[0].url||(t=this,clearTimeout(t._selectAnotherResolutionTimeout),t._selectAnotherResolutionTimeout=setTimeout(function(){t.show(0)},this.options.resolutionRefreshRate));var s,c,h,l={left:0,top:0,right:"auto",bottom:"auto"},d=this.isBody?this.$root.width():this.$root.innerWidth(),p=this.isBody?_.innerHeight||this.$root.height():this.$root.innerHeight(),u=this.$itemWrapper.data("width"),g=this.$itemWrapper.data("height"),y=u/g||1,f=(this._currentImage.alignX===T?this.options:this._currentImage).alignX,m=(this._currentImage.alignY===T?this.options:this._currentImage).alignY,v=w(this._currentImage.scale||this.options.scale),b=("fit"===v||"fit-smaller"===v?(c=g,(d<(h=u)||p<c||"fit-smaller"===v)&&(c=y<(s=d/p)?(h=Math.floor(p*y),p):s<y?(h=d,Math.floor(d/y)):(h=d,p))):c="fill"===v?(h=d,p):(h=Math.max(p*y,d),Math.max(h/y,p)),l.top=-(c-p)*m,l.left=-(h-d)*f,l.width=h,l.height=c,this.options.bypassCss||this.$wrap.css({width:d,height:p}).find(">.backstretch-item").not(".deleteable").each(function(){k(this).find("img,video,iframe").css(l)}),k.Event("backstretch.resize",{relatedTarget:this.$container[0]}));this.$container.trigger(b,this)}catch(t){}return this},show:function(f,m){var v,b,_,w,t,$;if(!(Math.abs(f)>this.images.length-1))return b=(v=this).$wrap.find(">.backstretch-item").addClass("deleteable"),_=v.videoWrapper,w={relatedTarget:v.$container[0]},v.$container.trigger(k.Event("backstretch.before",w),[v,f]),this.index=f,t=v.images[f],clearTimeout(v._cycleTimeout),delete v.videoWrapper,($=d(t))?(v.videoWrapper=new W(t),v.$item=v.videoWrapper.$video.css("pointer-events","none")):v.$item=k("<img />"),v.$itemWrapper=k('<div class="backstretch-item">').append(v.$item),this.options.bypassCss?v.$itemWrapper.css({display:"none"}):(v.$itemWrapper.css(o.itemWrapper),v.$item.css(o.item)),v.$item.bind($?"canplay":"load",function(t){function e(t){return(r[t]!==T?r:v.options)[t]}function i(){_&&(_.stop(),_.destroy()),b.remove(),!v.paused&&1<v.images.length&&v.cycle(),v.options.bypassCss||v.isBody||v.$container.css("background-image","none"),k(["after","show"]).each(function(){v.$container.trigger(k.Event("backstretch."+this,w),[v,f])}),$&&v.videoWrapper.play()}var o=k(this).parent(),r=o.data("options"),a=(m&&(r=k.extend({},r,m)),this.naturalWidth||this.videoWidth||this.width),n=this.naturalHeight||this.videoHeight||this.height,a=(o.data("width",a).data("height",n),e("transition")),n=e("transitionEasing"),s=e("transitionDuration");if(v.firstShow&&!v.options.animateFirst||!s||!a)o.show(),i();else{var c={new:o,old:b,transition:a,duration:s,easing:n,complete:i},h=c.transition||"fade",l=((h="string"==typeof h&&-1<h.indexOf("|")?h.split("|"):h)instanceof Array&&(h=h[Math.round(Math.random()*(h.length-1))]),c.new),d=c.old||k([]);switch(h.toString().toLowerCase()){default:case"fade":l.fadeIn({duration:c.duration,complete:c.complete,easing:c.easing||T});break;case"fadeinout":case"fade_in_out":var p=function(){l.fadeIn({duration:c.duration/2,complete:c.complete,easing:c.easing||T})};d.length?d.fadeOut({duration:c.duration/2,complete:p,easing:c.easing||T}):p();break;case"pushleft":case"push_left":case"pushright":case"push_right":case"pushup":case"push_up":case"pushdown":case"push_down":case"coverleft":case"cover_left":case"coverright":case"cover_right":case"coverup":case"cover_up":case"coverdown":case"cover_down":var p=h.match(/^(cover|push)_?(.*)$/),u="left"===p[2]?"right":"right"===p[2]?"left":"down"===p[2]?"top":"up"===p[2]?"bottom":"right",g={display:""},y={};g[u]="-100%",y[u]=0,l.css(g).animate(y,{duration:c.duration,complete:function(){l.css(u,""),c.complete.apply(this,arguments)},easing:c.easing||T}),"push"===p[1]&&d.length&&((g={})[u]="100%",d.animate(g,{duration:c.duration,complete:function(){d.css("display","none")},easing:c.easing||T}))}}v.firstShow=!1,v.resize()}),v.$itemWrapper.appendTo(v.$wrap),v.$item.attr("alt",t.alt||""),v.$itemWrapper.data("options",t),$||v.$item.attr("src",t.url),v._currentImage=t,v},current:function(){return this.index},next:function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift(this.index<this.images.length-1?this.index+1:0),this.show.apply(this,t)},prev:function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift(0===this.index?this.images.length-1:this.index-1),this.show.apply(this,t)},pause:function(){return this.paused=!0,this.videoWrapper&&this.videoWrapper.pause(),this},resume:function(){return this.paused=!1,this.videoWrapper&&this.videoWrapper.play(),this.cycle(),this},cycle:function(){var t,e,i,o;return 1<this.images.length&&(clearTimeout(this._cycleTimeout),t=this._currentImage&&this._currentImage.duration||this.options.duration,i=function(){this.$item.off(".cycle"),this.paused||this.next()},(e=d(this._currentImage))&&(this._currentImage.loop||(o=0,this.$item.on("playing.cycle",function(){var t=k(this).data("player");clearTimeout(o),o=setTimeout(function(){t.pause(),t.$video.trigger("ended")},1e3*(t.getDuration()-t.getCurrentTime()))}).on("ended.cycle",function(){clearTimeout(o)})),this.$item.on("error.cycle initerror.cycle",k.proxy(i,this))),e&&!this._currentImage.duration?this.$item.on("ended.cycle",k.proxy(i,this)):this._cycleTimeout=setTimeout(k.proxy(i,this),t)),this},destroy:function(t){k(_).off("resize.backstretch orientationchange.backstretch"),this.videoWrapper&&this.videoWrapper.destroy(),clearTimeout(this._cycleTimeout),t||this.$wrap.remove(),this.$container.removeData("backstretch")}};var t,n,s,g,y,f,m,W=function(){this.init.apply(this,arguments)},v=(W.prototype.init=function(t){function e(){i.$video=r,i.video=r[0]}var i=this,o="video";if(t.url instanceof Array||!c.test(t.url)||(o="youtube"),"youtube"===(i.type=o)){W.loadYoutubeAPI(),i.ytId=t.url.match(c)[2];o="https://www.youtube.com/embed/"+i.ytId+"?rel=0&autoplay=0&showinfo=0&controls=0&modestbranding=1&cc_load_policy=0&disablekb=1&iv_load_policy=3&loop=0&enablejsapi=1&origin="+encodeURIComponent(_.location.origin);i.__ytStartMuted=!!t.mute||t.mute===T,r=k("<iframe />").attr({src_to_load:o}).css({border:0,margin:0,padding:0}).data("player",i),t.loop&&r.on("ended.loop",function(){i.__manuallyStopped||i.play()}),i.ytReady=!1,e(),_.YT&&_.YT.loaded?(i._initYoutube(),r.trigger("initsuccess")):k(_).one("youtube_api_load",function(){i._initYoutube(),r.trigger("initsuccess")})}else{for(var r=k("<video>").prop("autoplay",!1).prop("controls",!1).prop("loop",!!t.loop).prop("muted",!!t.mute||t.mute===T).prop("preload","auto").prop("poster",t.poster||""),a=t.url instanceof Array?t.url:[t.url],n=0;n<a.length;n++){var s=a[n];"string"==typeof s&&(s={src:s}),k("<source>").attr("src",s.src).attr("type",s.type||null).appendTo(r)}r[0].canPlayType&&a.length?r.trigger("initsuccess"):r.trigger("initerror"),e()}},W.prototype._initYoutube=function(){var t,e=this,i=_.YT,o=(e.$video.attr("src",e.$video.attr("src_to_load")).removeAttr("src_to_load"),!!e.$video[0].parentNode),r=(o||(t=k("<div>").css("display","none !important").appendTo(document.body),e.$video.appendTo(t)),new i.Player(e.video,{events:{onReady:function(){e.__ytStartMuted&&r.mute(),o||(e.$video[0].parentNode===t[0]&&e.$video.detach(),t.remove()),e.ytReady=!0,e._updateYoutubeSize(),e.$video.trigger("canplay")},onStateChange:function(t){switch(t.data){case i.PlayerState.PLAYING:e.$video.trigger("playing");break;case i.PlayerState.ENDED:e.$video.trigger("ended");break;case i.PlayerState.PAUSED:e.$video.trigger("pause");break;case i.PlayerState.BUFFERING:e.$video.trigger("waiting");break;case i.PlayerState.CUED:e.$video.trigger("canplay")}},onPlaybackQualityChange:function(){e._updateYoutubeSize(),e.$video.trigger("resize")},onError:function(t){e.hasError=!0,e.$video.trigger({type:"error",error:t})}}}));return e.ytPlayer=r,e},W.prototype._updateYoutubeSize=function(){var t=this;switch(t.ytPlayer.getPlaybackQuality()||"medium"){case"small":t.video.videoWidth=426,t.video.videoHeight=240;break;case"medium":t.video.videoWidth=640,t.video.videoHeight=360;break;default:case"large":t.video.videoWidth=854,t.video.videoHeight=480;break;case"hd720":t.video.videoWidth=1280,t.video.videoHeight=720;break;case"hd1080":t.video.videoWidth=1920,t.video.videoHeight=1080;break;case"highres":t.video.videoWidth=2560,t.video.videoHeight=1440}return t},W.prototype.play=function(){var t=this;return t.__manuallyStopped=!1,"youtube"===t.type?t.ytReady&&(t.$video.trigger("play"),t.ytPlayer.playVideo()):t.video.play(),t},W.prototype.pause=function(){var t=this;return t.__manuallyStopped=!1,"youtube"===t.type?t.ytReady&&t.ytPlayer.pauseVideo():t.video.pause(),t},W.prototype.stop=function(){var t=this;return t.__manuallyStopped=!0,"youtube"===t.type?t.ytReady&&(t.ytPlayer.pauseVideo(),t.ytPlayer.seekTo(0)):(t.video.pause(),t.video.currentTime=0),t},W.prototype.destroy=function(){return this.ytPlayer&&this.ytPlayer.destroy(),this.$video.remove(),this},W.prototype.getCurrentTime=function(t){return"youtube"!==this.type?this.video.currentTime:this.ytReady?this.ytPlayer.getCurrentTime():0},W.prototype.setCurrentTime=function(t){var e=this;return"youtube"===e.type?e.ytReady&&e.ytPlayer.seekTo(t,!0):e.video.currentTime=t,e},W.prototype.getDuration=function(){return"youtube"!==this.type?this.video.duration:this.ytReady?this.ytPlayer.getDuration():0},W.loadYoutubeAPI=function(){_.YT&&_.__yt_load_event_interval__||(_.YT||k("script[src*=www\\.youtube\\.com\\/iframe_api]").length||k('<script type="text/javascript" src="https://www.youtube.com/iframe_api">').appendTo("body"),_.__yt_load_event_interval__=setInterval(function(){_.YT&&_.YT.loaded&&(k(_).trigger("youtube_api_load"),clearTimeout(_.__yt_load_event_interval__),delete _.__yt_load_event_interval__)},50))},function(){if("matchMedia"in _){if(_.matchMedia("(orientation: portrait)").matches)return"portrait";if(_.matchMedia("(orientation: landscape)").matches)return"landscape"}return screen.height>screen.width?"portrait":"landscape"}),b=function(){return _.innerHeight>_.innerWidth?"portrait":_.innerWidth>_.innerHeight?"landscape":"square"},I=(t=navigator.userAgent,n=navigator.platform,s=!!(s=t.match(/AppleWebKit\/([0-9]+)/))&&s[1],g=!!(g=t.match(/Fennec\/([0-9]+)/))&&g[1],y=t.match(/Opera Mobi\/([0-9]+)/),f=!!y&&y[1],m=!!(m=t.match(/MSIE ([0-9]+)/))&&m[1],!((-1<n.indexOf("iPhone")||-1<n.indexOf("iPad")||-1<n.indexOf("iPod"))&&s&&s<534||_.operamini&&"[object OperaMini]"==={}.toString.call(_.operamini)||y&&f<7458||-1<t.indexOf("Android")&&s&&s<533||g&&g<6||"palmGetResource"in _&&s&&s<534||-1<t.indexOf("MeeGo")&&-1<t.indexOf("NokiaBrowser/8.5.0")||m&&m<=6))}(jQuery,window),function(i){"use strict";postBackstretch={init:function(){this.postBackstretchImg()},postBackstretchImg:function(){var t=i(".post-template-large .wp-picture img, .post-template-large2 .wp-picture img, .content-article .post-gallery-slider img, .post-template-large img, .post-template-large2 img").first(),e=i(".single-post-large");0<t.length&&t.attr("src")&&(t.attr("data-src")?e.backstretch(t.attr("data-src")):e.backstretch(t.attr("src"))),e.length&&i(window).scroll(function(){var t=i(window).scrollTop();i(".single-post-large img").css("transform","translate3d(0px, "+t/1.2+"px, 0px)")})}},i(document).ready(function(){postBackstretch.init()})}(jQuery);